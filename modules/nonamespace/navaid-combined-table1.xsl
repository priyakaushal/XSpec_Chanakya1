<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" 
	xmlns:docinfo="http://www.lexis-nexis.com/glp/docinfo" 
	xmlns:index="urn:x-lexisnexis:content:publicationindex:sharedservices:1"
	xmlns:navaid="urn:x-lexisnexis:content:navigationaid:sharedservices:1" 
	xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/"
	version="2.0" exclude-result-prefixes="dita docinfo">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="navaid-combined-table1">
	<title>Convert first <sourcexml>table</sourcexml> to
		<targetxml>navaid:list</targetxml> <lnpid>id-AU16-21014</lnpid></title>
	<body>
		<p>The following rule is to be performed when the content of
				<sourcexml>docinfo:doc-id</sourcexml> starts with: <ul>
				<li>LAWNOW_LEG_YEARTITLE_BILLS_</li>
			</ul>
		</p>
		<p>Only the <b>first</b> table in these files becomes a <targetxml>navaid:landingpagebody/navaid:list</targetxml>.  Any other table should be converted according to the instructions for the <xref href="../../common_newest/Rosetta_table-LxAdv-table.dita">common table element</xref>.</p>
        <p>In addition to the example given here, please see the <xref href="navaid-combined-table-intro.dita">parent topic</xref> above for general instructions, the special examples given in the sibling topic <xref href="navaid-combined-table-special-examples.dita">Examples of tables with 2, 1 or 0 <sourcexml>remotelink</sourcexml> elements that should be converted to <targetxml>navaid:list/@style="banner"</targetxml></xref>, and the detailed instructions given in the topic <xref href="navaid-combined-details.dita">Convert Combined
					<sourcexml>remotelink</sourcexml> Elements To
				<targetxml>navaid:list</targetxml></xref>, below.</p>
  </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-PAC\AU16_navaid\navaid-combined-table1.dita  -->

	<xsl:template match="table[1][../../docinfo[starts-with(docinfo:doc-id, 'LAWNOW_LEG_YEARTITLE_BILLS_')]]" name="navaidListBanner">
		
		<xsl:if test="tgroup/tbody/row/entry/emph[not(remotelink)]|tgroup/tbody/row/entry/remotelink|tgroup/tbody/row/entry/emph/remotelink">
			<navaid:list style='banner'>
				<xsl:for-each select="tgroup/tbody/row/entry/emph[not(remotelink)]|tgroup/tbody/row/entry/remotelink|tgroup/tbody/row/entry/emph/remotelink">
					<index:entry>
						<xsl:choose>
							<xsl:when test="self::remotelink|self::emph/remotelink">
								<index:locator>
									<ref:lnlink service='DOCUMENT'>
										<ref:marker>
											<xsl:apply-templates select="node()"/>
										</ref:marker>
										<ref:locator>
											<ref:locator-key>
												<ref:key-name>
													<xsl:attribute name="name" select="@remotekey1"/>
												</ref:key-name>
												<ref:key-value>
													<xsl:attribute name="value" select="concat($navaid-dpsi, '-', @remotekey2)"/>
												</ref:key-value>
											</ref:locator-key>
										</ref:locator>
									</ref:lnlink>
								</index:locator>
							</xsl:when>
							<xsl:when test="self::emph">
								<meta xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
									<metaitem name='active' value='true'/>
								</meta>
								<index:entrytext>
									<xsl:apply-templates select="node()"/>
								</index:entrytext>
							</xsl:when>						
						</xsl:choose>
					</index:entry>
				</xsl:for-each>
			</navaid:list>
		</xsl:if>
	</xsl:template>
	<!--<xsl:template match="table">

		<!-\-  Original Target XPath:  navaid:list   -\->
		<navaid:list>
			<xsl:apply-templates select="@* | node()"/>
		</navaid:list>

	</xsl:template>

	<xsl:template match="docinfo:doc-id">

		<!-\-  Original Target XPath:  navaid:landingpagebody/navaid:list   -\->
		<navaid:landingpagebody>
			<navaid:list>
				<xsl:apply-templates select="@* | node()"/>
			</navaid:list>
		</navaid:landingpagebody>

	</xsl:template>

	<xsl:template match="remotelink">

		<!-\-  Original Target XPath:  navaid:list/@style="banner"   -\->
		<navaid:list>
			<xsl:attribute name="style">
				<xsl:text>banner</xsl:text>
			</xsl:attribute>
		</navaid:list>

	</xsl:template>-->

</xsl:stylesheet>