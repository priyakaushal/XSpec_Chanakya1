<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:dita="http://dita.oasis-open.org/architecture/2005/"
    xmlns:leg="http://www.lexis-nexis.com/glp/leg"
    xmlns:docinfo="http://www.lexis-nexis.com/glp/docinfo"
    version="2.0" exclude-result-prefixes="dita xsl">
    <dita:topic
        id="Rosetta_refpt_isChildOf_leg.level_leg.level-vrnt_leg.levelinfo_leg.levelstatus-to-LexisAdvance_primlaw.level_ref.anchor"
        xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/">
        <title><sourcexml>refpt</sourcexml> child of
            <sourcexml>leg:level/leg:level-vrnt/leg:levelinfo/leg:levelstatus</sourcexml> to <targetxml>primlaw:level/ref:anchor</targetxml> <lnpid>id-CCCC-10450</lnpid></title>
        <body>
            <section>
                <p>If <sourcexml>refpt</sourcexml> comes within
                    <sourcexml>leg:level/leg:level-vrnt/leg:levelinfo/leg:levelstatus</sourcexml>
                    then <targetxml>ref:anchor</targetxml> will become the first child of
                    <targetxml>primlaw:level</targetxml>.</p>
            </section>
            <example>
                <title>Source XML</title>
                <codeblock>
                    <![CDATA[
<leg:level id="NSW_ACT_2011-19_SCH2">
    <leg:level-vrnt leveltype="schedule" searchtype="LEGISLATION" subdoc="true" toc-caption="Schedule 2">
        <leg:levelinfo>
            <leg:levelstatus isrepealed="true"><refpt id="NSW_ACT_2011-19_SCH2" type="ext"/>[Repealed]</leg:levelstatus>
        </leg:levelinfo>
    </leg:level-vrnt>
</leg:level>
]]>
                </codeblock>
            </example>
            <example>
                <title>Target XML</title>
                <codeblock>
                    <![CDATA[
<primlaw:level leveltype="schedule" includeintoc="true" alternatetoccaption="Schedule 2">
    <ref:anchor id="NSW_ACT_2011-19_SCH2" anchortype="global"/>    
    <primlaw:levelinfo>
        <primlawinfo:primlawinfo>
            <legisinfo:legisinfo>
                <legisinfo:statusgroup>
                    <legisinfo:status statuscode="repealed">
                        <legisinfo:statustext>
                            [Repealed]
                        </legisinfo:statustext>
                    </legisinfo:status>
                </legisinfo:statusgroup>
            </legisinfo:legisinfo>
        </primlawinfo:primlawinfo>
    </primlaw:levelinfo> 
</primlaw:level>
  ]]>
                </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2012-08-30: Created. </p>
            </section>
        </body>
    </dita:topic>
    
    <!-- ******************************************************************************************
        FUNCTIONALITY FOR THIS MODULE HAS BEEN MOVED TO:
         /modules/leg/leg.levelinfo_leg.levelstatus.xsl - suppressing refpt in its place of origin
         /modules/leg/HK01_Acts_leg.level.xsl  - moves refpt to child of primlaw (stream-specific)
         /modules/leg/leg.level-LxAdv-primlaw.level.xsl -  moves refpt to child of primlaw (generic)
         
         I suggest using these or tweaking new modules in both places to account for the move. Leaving 
         this module invalid for now to get attention to this documentation. JL.
         ******************************************************************************************-->
         
    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    <xsl:message>Requires manual development!</xsl:message> 
		**********************************
		Paul: this will need to be implemented in your leg:level template as stated above
		in AU08 implemented in courtrule_body.xsl
		**********************************
    -->
    <xsl:template match="leg:levelinfo[$streamID=('AU18')]">
            <xsl:if test="./docinfo:currencystatement"/>
            <xsl:if test="./docinfo:currencystatement/contrib"/>
            <xsl:if test="normalize-space(.) = ''"/>
    </xsl:template>
</xsl:stylesheet>
