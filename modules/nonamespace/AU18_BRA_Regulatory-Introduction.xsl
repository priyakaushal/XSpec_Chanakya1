<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" xmlns:admindoc="urn:x-lexisnexis:content:administrative-document:sharedservices:1" xmlns:glp="http://www.lexis-nexis.com/glp" xmlns:jurisinfo="http://www.lexisnexis.com/xmlschemas/content/legal/jurisdiction-info/1/" xmlns:leg='http://www.lexis-nexis.com/glp/leg' xmlns:pubinfo="http://www.lexisnexis.com/xmlschemas/content/shared/publication-info/1/" xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/" version="2.0" exclude-result-prefixes="dita">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="legis-Introduction">
    <title>Introduction <lnpid>id-AU18-21418</lnpid></title>
    <shortdesc>This Conversion Instruction describes the conversion of the <b>Rosetta LEGDOC DTD</b>
        to <b>Admindoc Schema</b> (Version 4.9 PROD)</shortdesc>
    <body>
        <section>
            <title>Root Element</title>
            <sourcexml>LEGDOC[@legtype="misc-inst"]</sourcexml> The <sourcexml>LEGDOC</sourcexml>
            <b>Becomes</b>
            <targetxml>admindoc:admindoc</targetxml>. It is a root element for both content stream
            and the source attributes are listed below: <ol>
                <li><sourcexml>@id</sourcexml>
                    <b>becomes</b>
                    <targetxml>xml:id</targetxml>.</li>
                <li><sourcexml>@legtype</sourcexml> attribute contains  the value
                        <sourcexml>legtype="misc-inst"</sourcexml>
                    <b>becomes</b>
                    <targetxml>miscellaneous-instrument</targetxml></li>
                <li>Create <targetxml>admindoc:admindoc[@xml:lang]</targetxml> which is used to
                    specify the language that is being used in the content/document. The presence or
                    absence of attribute value will not affect delivery product behavior and default
                    value is 'none'.</li>
                <li>Create <targetxml>admindoc:admindoc@admindoctype="agency-material"</targetxml>
                    which is used to specify about the miscellaneous agency-issued documents.</li>
            </ol>
            <pre>

 <b><i>Example: Source XML</i></b>


&lt;LEGDOC legtype="misc-inst"&gt;
  &lt;docinfo:doc-lang lang="en"/&gt;
  &lt;docinfo:doc-country iso-cc="AU"/&gt;
  ...
&lt;/LEGDOC&gt;

</pre>
            <pre>
<b><i>Example: Target XML</i></b>


&lt;admindoc:admindoc xml:lang="en-AU" admindoctype="agency-material"&gt;
	...
	&lt;doc:metadata&gt;
		&lt;doc:docinfo&gt;
			&lt;classify:classification classscheme="au.admindoctype"&gt;
				&lt;classify:classitem&gt;
					&lt;classify:classitem-identifier&gt;
						&lt;classify:classname&gt;miscellaneous-instrument&lt;/classify:classname&gt;
					&lt;/classify:classitem-identifier&gt;
				&lt;/classify:classitem&gt;
			&lt;/classify:classification&gt;
		&lt;/doc:docinfo&gt;
	&lt;/doc:metadata&gt;
&lt;/admindoc:admindoc&gt;

            </pre>
            <p><targetxml>admindoc:head</targetxml>, <targetxml>admindoc:body</targetxml> and
                    <targetxml>doc:metadata</targetxml> are created as required children of
                    <targetxml>admindoc:admindoc</targetxml>.</p>
            <p>The <sourcexml>@searchtype</sourcexml> attribute will be dropped from conversion
                except for the citation element.</p>
        </section>
        <section>
            <title>Notes</title>
            <p>The following information is meant to help the user understand the conventions used
                in this document.</p>
            <p>Source elements and attributes are highlighted like this: <sourcexml>XML
                    SOURCE</sourcexml></p>
            <p>Target elements and attributes are highlighted like this: <targetxml>XML
                    TARGET</targetxml></p>
            <p>Verify content of following target attributes: <ul>
                    <li><sourcexml>@year</sourcexml> becomes <targetxml>@year</targetxml> is 4
                        digits in length. Any other lengths, do not output
                            <targetxml>@year</targetxml>.</li>
                    <li><sourcexml>@month</sourcexml> becomes <targetxml>@month</targetxml> is
                        between 01-12. Any numbers outside this range, do not output a
                            <targetxml>@month</targetxml>.</li>
                    <li><sourcexml>@day</sourcexml> becomes <targetxml>@day</targetxml> is between
                        01-31. Any numbers outside this range, do not output
                            <targetxml>@day</targetxml>.</li>
                </ul>
            </p>
        </section>
    </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-PAC\AU18_BRA_Regulatory\AU_BRA_Regulatory-Introduction.dita  -->
    <!--<xsl:message>AU18_BRA_Regulatory-Introduction.xsl requires manual development!</xsl:message>-->

    <!--<xsl:param name="outputSchemaLoc" select="'urn:x-lexisnexis:content:administrative-document:sharedservices:1 sch_admindoc.xsd'"/>-->
    
    <xsl:template match="LEGDOC[@legtype='misc-inst']">
        
        <!--  Original Target XPath:  admindoc:admindoc   -->
        <admindoc:admindoc>
            <xsl:call-template name="generateNSGlobalBindings"/>
            <!--<xsl:attribute name="schemaLocation" select="$outputSchemaLoc"/>-->
            <xsl:call-template name="xml_lang"/>
            <xsl:attribute name="admindoctype">agency-material</xsl:attribute>
            <xsl:apply-templates select="@* except @legtype"/>
            <admindoc:head>
                <xsl:choose>
                    <xsl:when test="descendant::leg:juris | descendant::leg:juris[@ln.user-displayed]">
                        <xsl:variable name="jurisValues">
                            <xsl:choose>
                                <xsl:when test="descendant::leg:juris/text()='NSW'">
                                    <xsl:text>NSW</xsl:text>
                                </xsl:when>
                                <xsl:when test="descendant::leg:juris/text()='QLD'">
                                    <xsl:text>QLD</xsl:text>
                                </xsl:when>
                                <xsl:when test="descendant::leg:juris/text()='SA'">
                                    <xsl:text>SA</xsl:text>
                                </xsl:when>
                                <xsl:when test="descendant::leg:juris/text()='TAS'">
                                    <xsl:text>TAS</xsl:text>
                                </xsl:when>
                                <xsl:when test="descendant::leg:juris/text()='VIC'">
                                    <xsl:text>VIC</xsl:text>
                                </xsl:when>
                                <xsl:when test="descendant::leg:juris/text()='WA'">
                                    <xsl:text>WA</xsl:text>
                                </xsl:when>
                                <xsl:when test="descendant::leg:juris/text()='ACT'">
                                    <xsl:text>ACT</xsl:text>
                                </xsl:when>
                                <xsl:when test="descendant::leg:juris/text()='NT'">
                                    <xsl:text>NT</xsl:text>
                                </xsl:when>
                                <xsl:otherwise>
                                    <xsl:value-of select="descendant::leg:juris/text()"/>
                                </xsl:otherwise>
                            </xsl:choose>
                        </xsl:variable>
                        <jurisinfo:execbodyinfo>
                            <jurisinfo:jurisdiction>
                                <jurisinfo:system>
                                    <xsl:value-of select="$jurisValues"/>
                                </jurisinfo:system>
                            </jurisinfo:jurisdiction>
                        </jurisinfo:execbodyinfo>
                    </xsl:when>
                    <xsl:otherwise>
                        <jurisinfo:execbodyinfo>
                            <jurisinfo:jurisdiction>
                                <jurisinfo:system><xsl:comment>Mandatory element according to the CI</xsl:comment></jurisinfo:system>
                            </jurisinfo:jurisdiction>
                        </jurisinfo:execbodyinfo>
                    </xsl:otherwise>
                </xsl:choose>
                <xsl:apply-templates select="leg:body/leg:info/leg:year"/>
            </admindoc:head>
            
            <xsl:apply-templates select="leg:body"/>
            <doc:metadata>
                <xsl:apply-templates select="docinfo"/>
            </doc:metadata>
        </admindoc:admindoc>
    </xsl:template>
    <xsl:template match="@type"/>
    <xsl:template match="@xml:lang"/>
</xsl:stylesheet>