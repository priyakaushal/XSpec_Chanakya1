<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" xmlns:pubinfo="http://www.lexisnexis.com/xmlschemas/content/shared/publication-info/1/" version="2.0" exclude-result-prefixes="dita">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Rosetta_pubdate_ln.user-displayed-to-LxAdv-pubinfo.pubdates_pubinfo.pubdate">
  <title><sourcexml>pubdate/@ln.user-displayed="false"</sourcexml> to
      <targetxml>pubinfo:pubdates/pubinfo:pubdate</targetxml>
    <lnpid>id-CCCC-10437</lnpid></title>
  <body>
    <section>
      <note>Elements that contain the attribute <sourcexml>@ln.user-displayed="false"</sourcexml>
        are used for certain functionality in Rosetta that does not exist in Lexis Advance. Each of
        the following elements have mappings described elsewhere in this CI for when this attribute
        does not exist. The examples here are ONLY for when this
          <sourcexml>@ln.user-displayed="false"</sourcexml> appears. (This attribute never has a
        "true" value, i.e. @ln.user-displayed="true".)</note>
      <p>When ln.user-displayed="false" appears on any date element (i.e.
          <sourcexml>pubinfo:pubdates ln.user-displayed="false"</sourcexml>), that element is
        translated into the target but with the element content omitted. Only the attributes are
        populated. So there is no displayable content.</p>
    </section>

    <example>
      <title>Source XML</title>
      <codeblock>

&lt;pubdate ln.user-displayed="false"&gt;
	&lt;date month="12" year="1997"&gt;December 1997&lt;/date&gt;
&lt;/pubdate&gt;

            </codeblock>
    </example>

    <example>
      <title>Target XML</title>
      <codeblock>

&lt;primlawinfo:dates&gt;
    &lt;pubinfo:pubdate month="12" year="1997"/&gt;
&lt;/pubinfo:pubdates&gt;

            </codeblock>
    </example>
<!--    <xsltinclusion>
      <xsl:stylesheet version="2.0">
        <!-\- BRT: modified the template from CA14 driver file. This template is duplicated in each of the driver files; is should be moved from all of these to a module. Currently only this template (in this DITA topic) has the modification.
        The instruction in this topic applies to "any date element", but only gives an example of pubdate and doesn't say which other dates are relevant. The
        template only addresses pubdate, but should be expanded to include other dates -\->
        <xsl:template match="pubdate">
          <xsl:element name="pubinfo:dates">
            <xsl:element name="pubinfo:pubdate">
              <!-\- BRT: added this condition to handle the rule in this topic (no text in result) -\->
              <xsl:choose>
                <xsl:when test="@ln.user-displayed='false'">
                  <xsl:call-template name="process_date_attributes"/>
                  <xsl:apply-templates select="*[not(self::date)]"/>
                </xsl:when>
                <xsl:otherwise>
                  <xsl:apply-templates/>
                </xsl:otherwise>
              </xsl:choose>
            </xsl:element>
          </xsl:element>
        </xsl:template>
      </xsl:stylesheet>
    </xsltinclusion>
-->  </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated (although the DITA file already has embedded XSLT).  Remove this comment after manual development complete!  (also remove the embedded XSLT within the DITA above) @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_pubdate_ln.user-displayed-to-LxAdv-pubinfo.pubdates_pubinfo.pubdate.dita  -->
<!--	<xsl:message>Rosetta_pubdate_ln.user-displayed-to-LxAdv-pubinfo.pubdates_pubinfo.pubdate.xsl requires manual development!</xsl:message> -->

        <!-- BRT: modified the template from CA14 driver file. This template is duplicated in each of the driver files; is should be moved from all of these to a module. Currently only this template (in this DITA topic) has the modification.
        The instruction in this topic applies to "any date element", but only gives an example of pubdate and doesn't say which other dates are relevant. The
        template only addresses pubdate, but should be expanded to include other dates -->
        <xsl:template xmlns="http://dita.oasis-open.org/architecture/2005/" xmlns:ditaarch="http://dita.oasis-open.org/architecture/2005/" match="pubdate">
          <xsl:element name="pubinfo:dates">
            <xsl:element name="pubinfo:pubdate">
              <!-- BRT: added this condition to handle the rule in this topic (no text in result) -->
              <xsl:choose>
                <xsl:when test="@ln.user-displayed='false'">
<!--                  <xsl:call-template name="process_date_attributes"/>-->
                  <xsl:apply-templates select="*[not(self::date)]"/>
                </xsl:when>
                <xsl:otherwise>
                  <xsl:apply-templates/>
                </xsl:otherwise>
              </xsl:choose>
            </xsl:element>
          </xsl:element>
        </xsl:template>
      
</xsl:stylesheet>