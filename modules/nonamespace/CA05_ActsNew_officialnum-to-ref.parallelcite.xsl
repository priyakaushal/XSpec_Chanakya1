<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:dita="http://dita.oasis-open.org/architecture/2005/"
    xmlns:ci="http://www.lexis-nexis.com/ci" xmlns:leg="http://www.lexis-nexis.com/glp/leg"
    xmlns:primlawinfo="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw-info/1/"
    xmlns:classify="http://www.lexisnexis.com/xmlschemas/content/shared/classification/1/"
    xmlns:lnci="http://www.lexisnexis.com/xmlschemas/content/shared/citations/1/"
    xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/" version="2.0"
    exclude-result-prefixes="#all">

    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="officialnum-to-ref.parallelcite">
        <title>officialnum to ref.parallelcite <lnpid>id-CA05-13635</lnpid></title>
        <body>
            <section>
                <p>When source data is having two <sourcexml>officialnum</sourcexml> and the second
                        <sourcexml>officialnum</sourcexml> begins with <b>"Enacted as: S.M."</b>,
                    the citation section beginning with "S.M." and ending "s. arabic number" or
                    ending c. arabic if no space s.|c. or space comma s.|c. after the arabic should
                    be copied and given <targetxml>ref:parallelcite</targetxml> markup. See below
                    example:</p>

                <note>
                    <p>Conversion should not create consecutive <targetxml>ref:citations</targetxml>
                        elements. When 2 or more consecutive sibling source elements map to
                            <targetxml>ref:citations</targetxml>, data should be merged to a single
                            <targetxml>ref:citations</targetxml> element.</p>
                </note>
                <pre>
&lt;leg:officialnum&gt;Enacted as: S.M. 2009, c. 15 (Assented to June 11, 2009)&lt;/leg:officialnum&gt;

<b>Becomes</b>

&lt;legis:head&gt;
    &lt;ref:citations&gt;
        &lt;ref:parallelcite citetype="parallel"&gt;
            &lt;lnci:cite&gt;
                &lt;lnci:content&gt;S.M. 2009, c. 15&lt;/lnci:content&gt;
            &lt;/lnci:cite&gt;
        &lt;/ref:parallelcite&gt;
    &lt;/ref:citations&gt;
&lt;/legis:head&gt;
</pre>
            </section>

            <section>
                <title>Changes</title>
                <p>2014-06-13: <ph id="change_20140613_PS">Created.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA05-ActsNew\officialnum-to-ref.parallelcite.dita  -->
    <!--<xsl:message>officialnum-to-ref.parallelcite.xsl requires manual development!</xsl:message> -->

    <xsl:template match="leg:officialnum[starts-with(.,'Enacted as: S.M')]" mode="parallel">
        
            <ref:parallelcite citetype="parallel">
                <lnci:cite>
                <lnci:content>
                    <xsl:value-of select="substring-after(substring-before(.,' ('),'Enacted as: ')"/>
                </lnci:content>
                </lnci:cite>
            </ref:parallelcite>
        

    </xsl:template>


</xsl:stylesheet>
