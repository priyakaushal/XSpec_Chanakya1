<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/" xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/" version="2.0" exclude-result-prefixes="dita">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Rosetta_refnum_refnumtype_UCN-LxAdv_ref_groupid">
   <title>refnum[@refnumtype="UCN"] - ref:groupid <lnpid>id-CCCC-12047</lnpid></title>
   <body>
      <section>
         <p><sourcexml>refnum[@refnumtype="UCN"]</sourcexml> becomes
               <targetxml>doc:docinfo/doc:membership/ref:groupid[@group-type="ucn-1"]</targetxml>.</p>
		 <p>The content of <sourcexml>refnum</sourcexml>, prepended with the string "urn:ucn-1:", becomes the content of the <targetxml>ref:resourcekey</targetxml>
			 attribute of <targetxml>ref:resourceid</targetxml>.</p>
         <p>Other attributes of <sourcexml>refnum</sourcexml> are dropped.</p>
      </section>
      <example>
         <title>Mapping of <sourcexml>refnum[@refnumtype="UCN"]</sourcexml></title>
         <codeblock>
&lt;refnum refnumtype="UCN" ln.user-displayed="false"&gt;00180609&lt;/refnum&gt;
           </codeblock>
         <b>becomes</b>
         <codeblock>


&lt;doc:docinfo doc-content-country="CA"&gt;
    &lt;!-- ...--&gt;
    &lt;doc:membership&gt;       
        &lt;ref:groupid group-type="ucn-1"&gt;
            &lt;ref:resourceid ref:resourcekey="urn:ucn-1:00180609"/&gt; 
        &lt;/ref:groupid&gt;         
    &lt;/doc:membership&gt;
    ...
&lt;/doc:docinfo&gt;

           </codeblock>
      </example>
      <section>
         <title>Changes</title>
          <p>2014-09-26: <ph id="change_20140926_AS">updated Instructions. Db issue# 1913</ph></p>
          <p>2014-09-17: <ph id="change_20140917_AS">updated example.
              P4- Db issue# 338</ph></p>
         <p>2014-09-15: <ph id="change_20140915_AS">update target mapping of
                        <sourcexml>refnum[@refnumtype="UCN"]</sourcexml> from <b>Head</b> to
                        <targetxml>doc:docinfo/doc:membership/ref:groupid[@group-type="ucn-1"]</targetxml>.
                    Db issue #1893 and 338</ph></p>
			<p>2014-06-26: <ph id="change_20140626_sep">Make <targetxml>ref:resourcekey</targetxml> UCN value urn conform to PGUID registry, e.g. "urn:ucn-1:00180609".</ph></p>
			<p>2014-06-12: <ph id="change_20140612_sep">Created this instruction.</ph></p>
      </section>
   </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_caselaw\Rosetta_refnum.refnumtype.UCN-LxAdv_ref.groupid.dita  --> 

<!-- Vikas Rohilla : Skip conversion in the current mode need to create in to the doc:docinfo the -->
<xsl:template match="refnum|refnum/@*"/>

<!-- Vikas Rohilla : Initial updated may be updated if required-->
	<xsl:template match="refnum[@refnumtype='UCN']" mode="docinfoMember">
	    <xsl:element name="doc:membership">
	        <xsl:element name="ref:groupid">
	            <xsl:attribute name="group-type">
	                <xsl:text>ucn-1</xsl:text>
	            </xsl:attribute>
	            <xsl:element name="ref:resourceid">
	                <xsl:attribute name="ref:resourcekey">
	                    <xsl:value-of select="concat('urn:ucn-1:',.)"/>
	                </xsl:attribute>
	            </xsl:element>    
	        </xsl:element>
	    </xsl:element>
	</xsl:template>


</xsl:stylesheet>