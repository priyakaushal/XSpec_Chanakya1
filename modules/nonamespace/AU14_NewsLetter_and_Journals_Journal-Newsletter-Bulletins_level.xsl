<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:index="urn:x-lexisnexis:content:publicationindex:sharedservices:1" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" xmlns:glp="http://www.lexis-nexis.com/glp" version="2.0" exclude-result-prefixes="dita glp">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Journal-Newsletter-Bulletins_level">
  <title>level <lnpid>id-NZ08-24017</lnpid></title>

  <body>
    <p><sourcexml class="+ topic/keyword xml-d/sourcexml ">level</sourcexml> becomes <targetxml class="+ topic/keyword xml-d/targetxml ">section</targetxml>, attributes <sourcexml class="+ topic/keyword xml-d/sourcexml ">@subdoc</sourcexml> becomes <targetxml class="+ topic/keyword xml-d/targetxml ">@includeintoc</targetxml> and <sourcexml class="+ topic/keyword xml-d/sourcexml ">@toc-caption</sourcexml> becomes <targetxml class="+ topic/keyword xml-d/targetxml ">@alternatetoccaption</targetxml></p>

      <note class="- topic/note ">If <sourcexml class="+ topic/keyword xml-d/sourcexml ">glp:note</sourcexml> is the sibling of <sourcexml class="+ topic/keyword xml-d/sourcexml ">bodytext</sourcexml> then move the <targetxml class="+ topic/keyword xml-d/targetxml ">note</targetxml> as the immediate child of <targetxml class="+ topic/keyword xml-d/targetxml ">bodytext</targetxml>.</note>

<pre xml:space="preserve" class="- topic/pre ">
   &lt;level&gt;
       &lt;bodytext&gt;
           &lt;p&gt;&lt;text&gt;&lt;emph typestyle="bf"&gt;&lt;emph typestyle="it"&gt;Peters v NZHB Holdings Ltd&lt;/emph&gt;&lt;/emph&gt;&lt;/text&gt;&lt;/p&gt;
       &lt;/bodytext&gt;
   &lt;/level&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>
    &lt;section&gt;
        &lt;bodytext&gt;
            &lt;p&gt;&lt;text&gt;&lt;emph typestyle="bf"&gt;&lt;emph typestyle="it"&gt;Peters v NZHB Holdings Ltd&lt;/emph&gt;&lt;/emph&gt;&lt;/text&gt;&lt;/p&gt;
        &lt;/bodytext&gt;
    &lt;/section&gt;
</pre>
      <p>Handling of <sourcexml class="+ topic/keyword xml-d/sourcexml ">level/glp:note:</sourcexml></p>
      <pre>&lt;level&gt;
    &lt;glp:note&gt;
        &lt;p&gt;&lt;text&gt;Anna Quinn&lt;/text&gt;&lt;/p&gt;
    &lt;/glp:note&gt;
    &lt;bodytext&gt;
        &lt;p&gt;&lt;text&gt;A recent article by John Tierney in the&lt;/text&gt;&lt;/p&gt;
        ...
    &lt;/bodytext&gt;
&lt;/level&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;section&gt;
    &lt;bodytext&gt;
        &lt;note&gt;
            &lt;bodytext&gt;
                &lt;p&gt;&lt;text&gt;Anna Quinn&lt;/text&gt;&lt;/p&gt;
            &lt;/bodytext&gt;
        &lt;/note&gt;
        &lt;p&gt;&lt;text&gt;A recent article by John Tierney in the&lt;/text&gt;&lt;/p&gt;
        ...
    &lt;/bodytext&gt;
&lt;/section&gt;
          
      </pre>
</body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-PAC\NZ08_NewsLetter_and_Journals\Journal-Newsletter-Bulletins_level.dita  -->
	<!-- <xsl:message>NZ08_NewsLetter_and_Journals_Journal-Newsletter-Bulletins_level.xsl requires manual development!</xsl:message> --> 

    <!-- the dita references level/glp:note however the GDS does not cointain this structure -->
    
	<xsl:template match="level">
	    <section xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
	        <xsl:apply-templates select="@* | bodytext/index | glp:note[following-sibling::level | preceding-sibling::level] | node() except (bodytext, glp:note)"/>
	        <xsl:if test="bodytext[not(index)] | glp:note[not(following-sibling::level | preceding-sibling::level)]">
		        <bodytext xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
		            <xsl:apply-templates select="glp:note | bodytext/node() except bodytext/index"/>
		        </bodytext>
		    </xsl:if>
		</section>
	</xsl:template>

	<xsl:template match="@subdoc">
		<xsl:attribute name="includeintoc">
		    <xsl:value-of select="."/>
		</xsl:attribute>
	</xsl:template>

	<xsl:template match="@toc-caption">
		<xsl:attribute name="alternatetoccaption">
		    <xsl:value-of select="."/>
		</xsl:attribute>
	</xsl:template>

</xsl:stylesheet>