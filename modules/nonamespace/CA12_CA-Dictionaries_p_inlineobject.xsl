<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:dita="http://dita.oasis-open.org/architecture/2005/"
	xmlns:proc="http://www.lexisnexis.com/xmlschemas/content/shared/process-elements/1/"
	xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"
	xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/" version="2.0"
	exclude-result-prefixes="dita">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
		id="CA12_CA-Dictionaries_p_inlineobject">
		<title>p/inlineobject <lnpid>id-CA12-15020</lnpid></title>

		<body>
			<p>When <sourcexml>inlineobject</sourcexml> is a child of <sourcexml>p</sourcexml> then
					<sourcexml>p/inlineobject</sourcexml> becomes
					<targetxml>p/text/ref:inlineobject</targetxml>.</p>

			<pre xml:space="preserve" class="- topic/pre ">
&lt;p&gt;
    &lt;inlineobject filename="MOGT05807-0001.jpg" type="image" attachment="ln-server" /&gt;
&lt;/p&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;p&gt;
    &lt;text&gt;       
        &lt;ref:inlineobject&gt;
            &lt;ref:locator&gt;
                &lt;ref:locator-key&gt;
                    &lt;ref:key-name name="object-key"/&gt;
                    &lt;ref:key-value value="X-Y-MOGT05807-0001"/&gt; &lt;!-- X and Y are LNI and SMI values obtained from CSSM --&gt;
                &lt;/ref:locator-key&gt;
                &lt;ref:locator-params&gt;
                    &lt;proc:param name="componentseq" value="1"/&gt;
                    &lt;proc:param name="object-type" value="image"/&gt; &lt;!-- allowable values: “image”; (from .jpg, .gif, .png, .bmp)--&gt;
                    &lt;proc:param name="object-smi" value=""/&gt; &lt;!-- This @value assignment is done by conversion program --&gt;
                &lt;/ref:locator-params&gt;
            &lt;/ref:locator&gt;
        &lt;/ref:inlineobject&gt;
    &lt;/text&gt;
&lt;/p&gt;
        </pre>
			<section>
				<title>Changes</title>
				<p>2014-03-13: <ph id="change_20140313_PS">Added Instruction for
							<sourcexml>p/inlineobject</sourcexml>, These instructions apply
						immediately to CA12.</ph></p>
			</section>
		</body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA12-Dictionaries\CA12_CA-Dictionaries_p_inlineobject.dita  -->
	<!--<xsl:message>CA12_CA-Dictionaries_p_inlineobject.xsl requires manual development!</xsl:message> -->


	<xsl:template match="p/inlineobject">

		
			<text>
				<ref:inlineobject>
					<!--<xsl:apply-templates select="@* | node()"/>-->
					<xsl:apply-templates select="@*[not(name() = 'attachment' or name() = 'key')]"
						mode="refinline"/>
					<xsl:apply-templates select="@attachment | @key" mode="refinline"/>
					<ref:locator>
						<ref:locator-key>
							<ref:key-name>
								<xsl:attribute name="name">object-key</xsl:attribute>
							</ref:key-name>
							<ref:key-value>
								<xsl:attribute name="value">
									<xsl:value-of select="@filename"/>
								</xsl:attribute>
							</ref:key-value>
						</ref:locator-key>
						<ref:locator-params>
							<proc:param>
								<xsl:attribute name="name">componentseq</xsl:attribute>
								<xsl:attribute name="value">1</xsl:attribute>
							</proc:param>
							<xsl:if
								test="contains(@filename, 'jpg') or contains(@filename, 'gif') or contains(@filename, 'png') or contains(@filename, 'tiff') or contains(@filename, 'bmp')">
								<proc:param>
									<xsl:attribute name="name">object-type</xsl:attribute>
									<xsl:attribute name="value">image</xsl:attribute>
								</proc:param>
							</xsl:if>
							<xsl:choose>
								<xsl:when test="@smi">
									<proc:param>
										<xsl:attribute name="name">object-smi</xsl:attribute>
										<xsl:attribute name="value">
											<xsl:value-of select="@filename"/>
										</xsl:attribute>
									</proc:param>
								</xsl:when>
							</xsl:choose>
						</ref:locator-params>
					</ref:locator>
				</ref:inlineobject>
			</text>
		
	</xsl:template>
</xsl:stylesheet>
