<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:dita="http://dita.oasis-open.org/architecture/2005/"
    xmlns:docinfo="http://www.lexis-nexis.com/glp/docinfo"
    xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/"
    xmlns:comm="http://www.lexis-nexis.com/glp/comm"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:funddoc="urn:x-lexisnexis:content:fundamentallegaldocument:sharedservices:1" version="2.0"
    exclude-result-prefixes="dita docinfo">

    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Introduction">
        <title>Introduction <lnpid>id-UK22CF-39008</lnpid>
        </title>
        <shortdesc>This Conversion Instructions describes the conversion of the Rosetta
            COMMENTARYDOC DTD to <b>funddoc 3.1_PROD</b> schema.</shortdesc>
        <body>

            <p><b>UK22CF</b> documents are identified using the root element
                    <sourcexml>COMMENTARYDOC</sourcexml> and element
                    <sourcexml>docinfo:selector</sourcexml> having value
                    <sourcexml>TreatiesLegislation</sourcexml>.</p>
            <section>
                <title>Root Element</title>
                <p>
                    <sourcexml>COMMENTARYDOC</sourcexml> becomes
                        <targetxml>funddoc:fundamentallegaldocument</targetxml> which is the root
                    element for UK22CF. The source attributes are: <sourcexml>@id</sourcexml>
                    becomes <targetxml>@xml:id</targetxml>, <sourcexml>@xml:lang</sourcexml>, if
                    present, suppress attribute and content, as a separate rule has been defined to
                    populate <targetxml>funddoc:fundamentallegaldocument/@xml:lang</targetxml>.</p>
            </section>

            <example>
                <title>Source XML 1</title>
                <codeblock>
&lt;COMMENTARYDOC&gt;
    ............
    ............
    &lt;docinfo:doc-lang lang="en"/&gt;
    &lt;docinfo:doc-country iso-cc="GB"/&gt;
    ............
    ............          
&lt;/COMMENTARYDOC&gt;

  </codeblock>
            </example>
            <example>
                <title>Target XML 1</title>
                <codeblock>

&lt;funddoc:fundamentallegaldocument xml:lang="en-GB"&gt;
      
      &lt;funddoc:head&gt;...&lt;/funddoc:head&gt;
      
      &lt;funddoc:body&gt;...&lt;/funddoc:body&gt;
      
      &lt;doc:metadata&gt;...&lt;/doc:metadata&gt;

&lt;/funddoc:fundamentallegaldocument&gt;
       </codeblock>
            </example>

            <note>Elements <targetxml>funddoc:head</targetxml>, <targetxml>funddoc:body</targetxml>,
                and <targetxml>doc:metadata</targetxml> are created as required children of
                    <targetxml>funddoc:fundamentallegaldocument</targetxml> during
                conversion.</note>
            <note>If there is no header information found in the Rosetta samles then conversion need
                to create empty <sourcexml>&lt;funddoc:head/&gt;</sourcexml> in NL output.</note>
            <note>
                <p>The <sourcexml>@searchtype</sourcexml> attribute will be suppressed from
                    conversion except for the citation elements.</p>
            </note>
            <p>
                <b>Note:</b>
            </p>
            <p>Source elements and attributes are highlighted like this:
                    <sourcexml>SOURCEXML</sourcexml></p>
            <p>Target elements and attributes are highlighted like this:
                    <targetxml>TARGETXML</targetxml></p>
            <p>Copy source attributes to target attributes unless otherwise specified.</p>
            <p>Every example is represented like EXAMPLE in all the Conversion Instructions and is
                captured under <pre>pre</pre> tag.</p>

            <section>
                <title>Changes</title>
                <p>2017-05-04: <ph id="change_20170504_RS">Updated schema version to 3.1 PROD
                    .</ph></p>
                <p>2016-09-19: <ph id="change_20160919_RS">Created</ph></p>
            </section>

        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-UK\UK22CF\Introduction.dita  -->


    <xsl:template match="COMMENTARYDOC">

        <!--  Original Target XPath:  funddoc:fundamentallegaldocument   -->
        <xsl:param name="outputSchemaLoc"
            select="'urn:x-lexisnexis:content:citator:sharedservices:1 sch_cttr.xsd'"/>
        <xsl:param name="match"/>
        
        <funddoc:fundamentallegaldocument>
            <xsl:call-template name="generateNSGlobalBindings"/>
            <xsl:attribute name="xsi:schemaLocation" select="$outputSchemaLoc"/>
            <xsl:call-template name="xml_lang"/>
            
            <funddoc:head/>
            <xsl:apply-templates select="comm:body"/>		 
            
            <doc:metadata>
                <xsl:apply-templates select="docinfo"/>
            </doc:metadata>
        </funddoc:fundamentallegaldocument>

    </xsl:template>


    <xsl:template match="COMMENTARYDOC/@searchtype"/>
    <xsl:template match="COMMENTARYDOC/@xml:lang"/>
    
    

</xsl:stylesheet>
