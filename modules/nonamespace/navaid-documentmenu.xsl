<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" 
	xmlns:navaid="urn:x-lexisnexis:content:navigationaid:sharedservices:1" 
	xmlns:proc="http://www.lexisnexis.com/xmlschemas/content/shared/process-elements/1/"
	xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/" version="2.0" exclude-result-prefixes="dita">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="navaid-documentmenu">
    <title>Convert Certain <sourcexml>remotelink</sourcexml> Elements To
        <targetxml>navaid:documentmenuitem</targetxml> <lnpid>id-AU16-21019</lnpid></title>
    <body>

      <p>If all of the following are true: <ul>
          <li>A <sourcexml>remotelink</sourcexml> contains any of the following values: <ul>
              <li>LawNow Home Page</li>
              <li>Back to Year List</li>
              <li>Back to Alphabet Listing</li>
              <li>Back to Subject List</li>
            </ul></li>
          <li>This <sourcexml>remotelink</sourcexml> has as an ancestor (not only a direct parent,
            but any ancestor) either: <ul>
              <li>A <sourcexml>p</sourcexml>.</li>
              <li>A <sourcexml>table</sourcexml> where
                <sourcexml>table/tgroup/@cols="1"</sourcexml>.</li>
            </ul></li>
          <li>The contents of this <sourcexml>remotelink</sourcexml> are the only non-white-space
            text contents within the entire containing <sourcexml>p</sourcexml> or
              <sourcexml>table</sourcexml></li>
        </ul> Then the start-tags and end-tags of the containing <sourcexml>p</sourcexml> or
          <sourcexml>table</sourcexml> and all other tags within the these containing elements are
        dropped. The <sourcexml>remotelink</sourcexml> becomes
          <targetxml>documentmenuitem/text/ref:crossreference</targetxml>, with
          <targetxml>documentmenuitem</targetxml> and <targetxml>documentmenuitem/text</targetxml>
        being created as containers for the <targetxml>ref:crossreference</targetxml>. When creating
        the <targetxml>ref:crossreference</targetxml> from the <sourcexml>remotelink</sourcexml>,
        use the instructions in the General Mark-up section for the <xref href="../../common_newest/Rosetta_remotelink-LxAdv-ref.crossreference.dita">common remotelink element</xref>. </p>
      <p>If there are any <sourcexml>p/text</sourcexml> elements (or their child elements) or
          <sourcexml>table/tgroup/tbody/row/entry</sourcexml> elements (or their child elements)
        that contain only white-space, this white-space is dropped.</p>
        
      <p>If a <sourcexml>p</sourcexml> element is empty or contains only white-space and will be converted and output between two <targetxml>documentmenu</targetxml> elements, this <sourcexml>p</sourcexml> should be dropped instead and all the <targetxml>documentmenuitem</targetxml> elements combined into one single <targetxml>documentmenu</targetxml> element.</p>

      <p>If multiple <targetxml>documentmenuitem</targetxml> element's are output in a consequetive
        sequence, they must be output within the same <targetxml>documentmenu</targetxml>. This
        applies to <targetxml>documentmenuitem</targetxml> elements occuring anywhere in the
        document. </p>

      <p>A <targetxml>documentmenu</targetxml> must not occur before an alt-heading. Any content
        that is converted to a <targetxml>documentmenuitem</targetxml> (and therefore requires a
          <targetxml>documentmenu</targetxml> to contain it) before an
          <targetxml>alt-heading</targetxml> must be moved so that it occurs after the
          <targetxml>alt-heading</targetxml>. Further, if there is content that is converted to a
          <targetxml>documentmenuitem</targetxml> immediately following the content that is
        converted to <targetxml>alt-heading</targetxml>, the <targetxml>documentmenuitem</targetxml>
        content occuring before the <targetxml>alt-heading</targetxml> should be combined within the
        same <targetxml>documentmenu</targetxml> as the <targetxml>documentmenuitem</targetxml>
        content occuring immediately following an <targetxml>alt-heading</targetxml>. </p>

  </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-PAC\AU16_navaid\navaid-documentmenu.dita  -->
	<!--<xsl:message>navaid-documentmenu.xsl requires manual development!</xsl:message> -->

	

	<xsl:template match="p[descendant::remotelink[(contains(., 'LawNow Home Page') or contains(., 'Back to Year List') or contains(., 'Back to Alphabet Listing') or 
		contains(., 'Back to Subject List'))]]">

		<!--  Original Target XPath:  documentmenuitem/text/ref:crossreference   -->
		<navaid:documentmenu>
			<xsl:apply-templates select="@*"/>
			<xsl:apply-templates select="node()"/>
			<xsl:apply-templates select="following-sibling::p[descendant::remotelink[(contains(., 'LawNow Home Page') or contains(., 'Back to Year List') or 
				contains(., 'Back to Alphabet Listing') or contains(., 'Back to Subject List'))]]/text"/>
		</navaid:documentmenu>

	</xsl:template>
	
	<xsl:template match="p[descendant::remotelink[(contains(., 'LawNow Home Page') or contains(., 'Back to Year List') or contains(., 'Back to Alphabet Listing') or 
		contains(., 'Back to Subject List'))] and preceding-sibling::p[descendant::remotelink[(contains(., 'LawNow Home Page') or contains(., 'Back to Year List') or 
		contains(., 'Back to Alphabet Listing') or contains(., 'Back to Subject List'))]]]" priority="25"/>
	
	<xsl:template match="text[descendant::remotelink[(contains(., 'LawNow Home Page') or contains(., 'Back to Year List') or 
		contains(., 'Back to Alphabet Listing') or contains(., 'Back to Subject List'))]]">
		<navaid:documentmenuitem>
			<text xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
				
				<xsl:apply-templates select="node()"/>
				
			</text>
		</navaid:documentmenuitem>
	</xsl:template>
	<!-- normalize-space(descendant::remotelink)=(tokenize($docMenuItem, ',') -->

	<xsl:template match="table[tgroup/@cols = '1' and descendant::remotelink/text()=(tokenize($docMenuItem, ',')) 
		and not(preceding-sibling::table[tgroup/@cols = '1'] and descendant::remotelink/text()=(tokenize($docMenuItem, ',')))]" priority="25">

		<!--  Original Target XPath:  documentmenuitem/text/ref:crossreference   -->
		<navaid:documentmenu>
			<xsl:apply-templates select="tgroup/tbody/row/entry[remotelink]"/>
			<xsl:for-each select="following-sibling::table[tgroup/@cols = '1'][descendant::remotelink[contains(., 'LawNow Home Page') or 
				contains(., 'Back to Year List') or contains(., 'Back to Alphabet Listing') or contains(., 'Back to Subject List')]]">
				<xsl:apply-templates select="tgroup/tbody/row/entry[remotelink]"/>
			</xsl:for-each>
		</navaid:documentmenu>

	</xsl:template>
	
	<xsl:template match="table[preceding-sibling::table[tgroup/@cols = '1'][descendant::remotelink[contains(., 'LawNow Home Page') or 
		contains(., 'Back to Year List') or contains(., 'Back to Alphabet Listing') or contains(., 'Back to Subject List')]]]
		[tgroup/@cols = '1'][descendant::remotelink[contains(., 'LawNow Home Page') or 
		contains(., 'Back to Year List') or contains(., 'Back to Alphabet Listing') or contains(., 'Back to Subject List')]]"/>
	
	<xsl:template match="entry[descendant::remotelink[(contains(., 'LawNow Home Page') or contains(., 'Back to Year List') or 
		contains(., 'Back to Alphabet Listing') or contains(., 'Back to Subject List'))]]">
		<navaid:documentmenuitem>
			<text xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
				
				<xsl:apply-templates select="node()"/>
				
			</text>
		</navaid:documentmenuitem>
	</xsl:template>
	
</xsl:stylesheet>