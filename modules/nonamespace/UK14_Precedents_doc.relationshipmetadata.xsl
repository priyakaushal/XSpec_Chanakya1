<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:dita="http://dita.oasis-open.org/architecture/2005/"
    xmlns:classify="http://www.lexisnexis.com/xmlschemas/content/shared/classification/1/"
    xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/"
    xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/" version="2.0"
    exclude-result-prefixes="dita">

    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
        id="UK14_Precedents_doc.relationshipmetadata">
        <title><sourcexml>relationshipmetadata</sourcexml> to
                <targetxml>doc:relationshipmetadata</targetxml>
            <lnpid>id-UK14-30227</lnpid></title>
        <body>
            <ul>
                <li><sourcexml>relationshipmetadata</sourcexml> becomes
                        <targetxml>doc:relationshipmetadata</targetxml>. <ul>
                        <li><sourcexml>keygroup[@grouptype @id]</sourcexml> becomes
                                <targetxml>ref:keygroup[@grouptype @xml:id]</targetxml><ul>
                                <li><sourcexml>key[@idref]</sourcexml> become
                                        <targetxml>ref:key[@idref]</targetxml></li>
                            </ul></li>
                    </ul></li>
            </ul>

            <pre>
        <b>EXAMPLE</b>
            
<b><i>Source XML</i></b>

&lt;relationshipmetadata&gt;
    &lt;keygroup grouptype="alternatekeys" id="alt001"&gt;
        &lt;key idref="a123"/&gt;
        &lt;key idref="b456"/&gt;
        &lt;key idref="c789"/&gt;
    &lt;/keygroup&gt;
&lt;/relationshipmetadata&gt;
 
<b><i>Target XML</i></b>

&lt;doc:relationshipmetadata&gt;
    &lt;ref:keygroup grouptype="alternatekeys" xml:id="alt001"&gt;
        &lt;ref:key idref="a123"/&gt;
        &lt;ref:key idref="b456"/&gt;
        &lt;ref:key idref="c789"/&gt;
    &lt;/ref:keygroup&gt;
&lt;/doc:relationshipmetadata&gt;

                </pre>
            <section>
                <title>Changes</title>
                <p>2016-03-27: <ph id="change_20160327_jm">Section is new. New data and
                    xpaths.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-UK\UK14-Precedents\UK14_Precedents_doc.relationshipmetadata.dita  -->
    <!--<xsl:message>UK14_Precedents_doc.relationshipmetadata.xsl requires manual development!</xsl:message>-->

    <xsl:template match="relationshipmetadata">

        <!--  Original Target XPath:  doc:relationshipmetadata   -->
        <doc:relationshipmetadata>
            <xsl:apply-templates select="@* | node()"/>
        </doc:relationshipmetadata>

    </xsl:template>

    <xsl:template match="keygroup[@grouptype or @id]">

        <!--  Original Target XPath:  ref:keygroup[@grouptype@xml:id]   -->
        <ref:keygroup>
            <xsl:apply-templates select="@* | node()"/>
        </ref:keygroup>

    </xsl:template>

    <xsl:template match="keygroup/key[@idref]">

        <!--  Original Target XPath:  ref:key[@idref]   -->
        <ref:key>
            <xsl:apply-templates select="@* | node()"/>
        </ref:key>

    </xsl:template>

    <xsl:template match="key/@idref">
        <xsl:attribute name="idref">
            <xsl:value-of select="."/>
        </xsl:attribute>
    </xsl:template>
    
    <xsl:template match="keygroup/@grouptype">
        <xsl:attribute name="grouptype">
         <xsl:value-of select="."/>
        </xsl:attribute>
    </xsl:template>

    <xsl:template match="classification/@classscheme">
        
    </xsl:template>
</xsl:stylesheet>
