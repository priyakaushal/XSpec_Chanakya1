<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:dita="http://dita.oasis-open.org/architecture/2005/"
    xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/"
    xmlns:pubinfo="http://www.lexisnexis.com/xmlschemas/content/shared/publication-info/1/"
    xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"
    version="2.0" exclude-result-prefixes="dita pubinfo">

    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="UK15PG_DIGESTDOC_pubdate">
        <title>pubdate <lnpid>id-UK15-30443</lnpid></title>
        <body>
            <section>
                <p><sourcexml>pubdate[@display-name]/date[@day @month @year]</sourcexml> becomes
                        <targetxml>doc:metadata/pubinfo:pubinfo/pubinfo:dates/pubinfo:pubdate[@day
                        @month @year]/date-text</targetxml>. The attribute
                        <sourcexml>@display-name</sourcexml> is suppressed.</p>
            </section>
            <note>Occurs in smart forms, dpsi 0JUM and 0KVS.</note>
            <example>
                <title>Source XML</title>
                <codeblock> &lt;dig:body&gt; &lt;dig:info&gt; &lt;pubdate display-name="Published
                    Date"&gt; &lt;date day="21" month="02" year="2011"&gt;21/02/2011&lt;/date&gt;
                    &lt;/pubdate&gt; &lt;/dig:info&gt; &lt;/dig:body&gt; </codeblock>
                <title>Target XML</title>
                <codeblock> &lt;doc:metadata&gt; &lt;pubinfo:pubinfo&gt; &lt;pubinfo:dates&gt;
                    &lt;pubinfo:pubdate day="21" month="02" year="2011"&gt;
                    &lt;date-text&gt;21/02/2011&lt;/date-text&gt; &lt;/pubinfo:pubdate&gt;
                    &lt;/pubinfo:dates&gt; &lt;/pubinfo:pubinfo&gt; &lt;/doc:metadata&gt;
                </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2013-10-14: <ph id="change_20131014_jm">New Rule. Supports move of smart-form
                        content from UK11-DA to UK15-DS. Webteam # 240975 and #247307.</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-UK\UK15-PracticalGuidance\UK15PG_DIGESTDOC_pubdate.dita  -->
    <!--<xsl:message>UK15PG_DIGESTDOC_pubdate.xsl requires manual development!</xsl:message> -->

    <xsl:template match="pubdate">

        <!--  Original Target XPath:  doc:metadata/pubinfo:pubinfo/pubinfo:dates   -->
        <pubinfo:pubinfo>
        <pubinfo:dates>
            <pubinfo:pubdate>
                <xsl:if test="date/@year">
                    <xsl:attribute name="year">
                        <xsl:value-of select="date/@year"/>
                    </xsl:attribute>
                </xsl:if>
                <xsl:if test="date/@month">
                    <xsl:attribute name="month">
                        <xsl:value-of select="date/@month"/>
                    </xsl:attribute>
                </xsl:if>
                <xsl:if test="date/@day">
                    <xsl:attribute name="day">
                        <xsl:value-of select="date/@day"/>
                    </xsl:attribute>
                </xsl:if>
                <xsl:apply-templates select="@*|node()"/>
            </pubinfo:pubdate>
        </pubinfo:dates>
        </pubinfo:pubinfo>

    </xsl:template>

    <xsl:template match="pubdate/date">
        <date-text>
            <xsl:apply-templates select="node()"/>
        </date-text>
    </xsl:template>

    <xsl:template match="@display-name">
        <!--supressed-->
    </xsl:template>

</xsl:stylesheet>
