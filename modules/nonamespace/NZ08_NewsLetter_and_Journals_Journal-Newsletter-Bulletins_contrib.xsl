<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/"
	xmlns:jrnl="http://www.lexis-nexis.com/glp/jrnl" xmlns:nitf="http://iptc.org/std/NITF/2006-10-18/" xmlns:glp="http://www.lexis-nexis.com/glp"
	xmlns:person="http://www.lexisnexis.com/xmlschemas/content/shared/person/1/" version="2.0" exclude-result-prefixes="dita jrnl">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Journal-Newsletter-Bulletins_contrib">
		<title>contrib <lnpid>id-NZ08-24009</lnpid></title>

		<body>
			<p>Exceptional use case for Journals-Newsletters-Bulletins</p>
			<p><sourcexml class="+ topic/keyword xml-d/sourcexml ">jrnl:prelim/contrib</sourcexml> becomes <targetxml>nitf:byline/person:contributor</targetxml>.</p>
			<p><sourcexml class="+ topic/keyword xml-d/sourcexml ">contrib</sourcexml> becomes <targetxml class="+ topic/keyword xml-d/targetxml ">person:contributor</targetxml></p>

			<p><sourcexml class="+ topic/keyword xml-d/sourcexml ">@contribtype</sourcexml> becomes <targetxml class="+ topic/keyword xml-d/targetxml ">@contributor-type</targetxml></p>

			<p>If <sourcexml class="+ topic/keyword xml-d/sourcexml ">@contribtype</sourcexml> is not present in the source data then conversion need to create <targetxml class="+ topic/keyword xml-d/targetxml "
					>@contributor-type="undetermined"</targetxml> in <targetxml class="+ topic/keyword xml-d/targetxml ">person:contributor</targetxml></p>

			<note class="- topic/note ">If in source <sourcexml class="+ topic/keyword xml-d/sourcexml ">contrib</sourcexml> element is not having any data then suppressed the element.</note>

			<pre xml:space="preserve" class="- topic/pre ">
&lt;contrib&gt;HMS, LL in NZ [16.002; 16.064] 
    &lt;person&gt;&lt;name.text&gt;Elizabeth Toomey&lt;/name.text&gt;&lt;/person&gt;
&lt;/contrib&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;person:contributor contributor-type="undetermined"&gt; HMS, LL in NZ [16.002; 16.064]
	&lt;person:person&gt;
		&lt;person:name.text&gt;Elizabeth Toomey&lt;/person:name.text&gt;
	&lt;/person:person&gt;
&lt;/person:contributor&gt;
</pre>

			<note class="- topic/note ">Handling of <sourcexml class="+ topic/keyword xml-d/sourcexml ">bodytext/contrib</sourcexml> will become <targetxml class="+ topic/keyword xml-d/targetxml "
					>bodytext/note/byline/person:contributor</targetxml>.</note>

			<pre xml:space="preserve" class="- topic/pre ">
&lt;bodytext&gt;
	&lt;contrib&gt;Land Law [14.033]&lt;/contrib&gt;
&lt;/bodytext&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;bodytext&gt;
  &lt;note&gt;
	 &lt;byline&gt;
	 	 &lt;person:contributor contributor-type="undetermined"&gt;Land Law [14.033]&lt;/person:contributor&gt;
	 &lt;/byline&gt;
  &lt;/note&gt;
&lt;/bodytext&gt;
</pre>
			<note class="- topic/note ">Handling of <sourcexml class="+ topic/keyword xml-d/sourcexml ">contrib/remotelink</sourcexml> will become <targetxml class="+ topic/keyword xml-d/targetxml "
					>person:contributor/ref:crossreference</targetxml>.</note>

			<pre xml:space="preserve" class="- topic/pre ">
&lt;contrib&gt;Sale of Land [3.16(a)] HMS, LL in New Zealand [
  &lt;remotelink service="DOC-ID" remotekey1="REFPTID" refpt="PARA-LAND-4-019-b" dpsi="02IF"&gt;4.019(b)&lt;/remotelink&gt;
] DWMcM&lt;/contrib&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;person:contributor contributor-type="undetermined"&gt;Sale of Land [3.16(a)] HMS, LL in New Zealand [
  &lt;ref:crossreference crossreferencetype="seeAlso"&gt;
      &lt;ref:content&gt;4.019(b)&lt;/ref:content&gt;
        &lt;ref:locator&gt;
            &lt;ref:locator-key&gt;
              &lt;ref:key-name name="DOC-ID"/&gt;
              &lt;ref:key-value value="PARA-LAND-4-019-b"/&gt;
            &lt;/ref:locator-key&gt;
            &lt;ref:locator-params&gt;
              &lt;proc:param name="dpsi" value="02IF"/&gt;
            &lt;/ref:locator-params&gt;
       &lt;/ref:locator&gt;
    &lt;/ref:crossreference&gt;
&lt;/person:contributor&gt;

    </pre>

		</body>

	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-PAC\NZ08_NewsLetter_and_Journals\Journal-Newsletter-Bulletins_contrib.dita  -->
	<!-- <xsl:message>NZ08_NewsLetter_and_Journals_Journal-Newsletter-Bulletins_contrib.xsl requires manual development!</xsl:message> -->

	<xsl:template match="contrib" name="contrib">
		<!-- add check - if contrib empty not empty -->
		<xsl:if test="not(. = '')">
			<person:contributor>
				<xsl:choose>
					<xsl:when test="@contribtype">
						<xsl:attribute name="contributor-type" select="@contribtype"/>
					</xsl:when>
					<xsl:otherwise>
						<xsl:attribute name="contributor-type" select="'undetermined'"/>
					</xsl:otherwise>
				</xsl:choose>
				<xsl:apply-templates select="@* except @contribtype | node() except bio"/>
				<xsl:if test="bio">
					<person:person>
						<xsl:apply-templates select="bio"/>
					</person:person>
				</xsl:if>
			</person:contributor>
		</xsl:if>
	</xsl:template>

	<xsl:template match="contrib[parent::jrnl:prelim]">
		<nitf:byline>
			<xsl:call-template name="contrib"/>
		</nitf:byline>
	</xsl:template>

	<xsl:template match="contrib[parent::bodytext]">
		<note>
			<byline>
				<xsl:call-template name="contrib"/>
			</byline>
		</note>
	</xsl:template>

	<xsl:template match="contrib[parent::glp:note]">
		<byline>
			<xsl:call-template name="contrib"/>
		</byline>
	</xsl:template>

	<!-- to match DT - GDS PS2017042408043486378LNINZJRNLSANDNWSLTRS_input_196200NZLJ00600121_000020.xml -->
	<xsl:template match="contrib/inlineobject" priority="25"/>
</xsl:stylesheet>
