<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:dita="http://dita.oasis-open.org/architecture/2005/"
	xmlns:ci="http://www.lexis-nexis.com/ci"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:comm="http://www.lexis-nexis.com/glp/comm"
	xmlns:dict="urn:x-lexisnexis:content:dict:sharedservices:1"
	xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/"
	xmlns:xsltdoc="http://www.lexisnexis.com/xmlstylesheets/documentation/xslt-documentation/1/"
	xmlns:xs="http://www.w3.org/2001/XMLSchema"
	xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/"
	version="2.0" exclude-result-prefixes="dita ci">
	
		
	<xsl:output method="xml"></xsl:output>
	<xsl:output indent="no"></xsl:output>

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/"
		id="CA12_CA-Dictionaries_Introduction">
		<title>Introduction <lnpid>id-CA12-15014</lnpid></title>

		<body>
			<p>This Conversion Instruction describes the conversion of Dictionary 2.5 PROD Schema in
				the document.</p>

			<p>CA Dictionaries are identified using the root element
					<sourcexml>COMMENTARYDOC</sourcexml>.</p>

			<p><sourcexml>COMMENTARYDOC</sourcexml> becomes <targetxml>dict:dictionary</targetxml>.
				It's a root element for CA Dictionaries. The source attributes are:
					<sourcexml>@id</sourcexml> becomes <targetxml>@xml:id</targetxml>,
					<sourcexml>@xml:lang</sourcexml>, if present, suppress attribute and content, as
				a separate rule has been defined to populate
					<targetxml>dict:dictionary/@xml:lang</targetxml>.</p>

			<note>
				<p>There are namespace reference being used in input documents within
						<sourcexml>ci:cite</sourcexml>. Conversion needs to supress this namespace
					from target and instead use the namespaces in
					CA-Dictionaries_Namespaces.dita.</p>
			</note>

			<pre>
      
&lt;ci:cite xmlns:ci="http://www.lexis-nexis.com/ci"&gt;
       
<b>becomes</b>
            
&lt;lnci:cite&gt;
       
    </pre>

			<pre>

&lt;COMMENTARYDOC ...&gt;
        ...
        &lt;docinfo:doc-lang lang="en"/&gt;
        &lt;docinfo:doc-country iso-cc="CA"/&gt;
        ...
&lt;/COMMENTARYDOC&gt;
<b>Becomes</b>

&lt;dict:dictionary xml:lang="en-CA"&gt;
      
      &lt;dict:head&gt;...&lt;/dict:head&gt;
      
      &lt;dict:body&gt;...&lt;/dict:body&gt;
      
      &lt;doc:metadata&gt;...&lt;/doc:metadata&gt;

&lt;/dict:dictionary&gt;
</pre>

			<p><targetxml>dict:head</targetxml>, <targetxml>dict:body</targetxml>, and
					<targetxml>doc:metadata</targetxml> are created as required children of
					<targetxml>dict:dictionary</targetxml></p>
			<note>The <sourcexml>@searchtype</sourcexml> attribute will be suppressed from
				conversion except for the citation elements.</note>
			<section>
				<title>Note:</title>
				<p>Source elements and attributes are highlighted like this:
						<sourcexml>SOURCEXML</sourcexml></p>
				<p>Target elements and attributes are highlighted like this:
						<targetxml>TARGETXML</targetxml></p>
				<p>Copy source attributes to target attributes unless otherwise specified.</p>
				<p>Every example is represented like "EXAMPLE" in all the dita's and is captured
					under <pre>pre</pre> tag.</p>
			</section>
		</body>

	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA12-Dictionaries\CA12_CA-Dictionaries_Introduction.dita  -->
	<!--<xsl:message>CA12_CA-Dictionaries_Introduction.xsl requires manual development!</xsl:message> -->
	
	<xsl:template match="COMMENTARYDOC">

		<!--  Original Target XPath:  dict:dictionary   -->
		<dict:dictionary>
			<xsl:for-each select="$lexisAdvNamespaces/*">
				<xsl:sort/>
				<xsl:namespace name="{substring-after(substring-before(., '='), ':')}"
					select="substring-after(translate(., '&#034;', ''), '=')"/>
			</xsl:for-each>
			<xsl:attribute name="xsi:schemaLocation" select="$outputSchemaLoc"/>
			<xsl:call-template name="xml_lang"/>
			<!--<xsl:apply-templates select="@* | node()"/>-->
			<dict:head>
				<xsl:comment>Mandatory element according to the CI</xsl:comment>				
			</dict:head>
			<dict:body>
				<xsl:apply-templates select="comm:info"/>
				<xsl:apply-templates select="comm:body"/>
			</dict:body>
			<!---->

			<doc:metadata>
				<!--<xsl:apply-templates select="/COMMENTARYDOC/dig:body/dig:info/pubdate"/>-->
				<xsl:apply-templates select="docinfo"/>
			</doc:metadata>
		</dict:dictionary>

	</xsl:template>
	
	<xsl:template match="COMMENTARYDOC/@xml:lang"/>
	
</xsl:stylesheet>
