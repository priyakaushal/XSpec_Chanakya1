<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" 
    xmlns:frm="http://www.lexis-nexis.com/glp/frm" 
    version="2.0" exclude-result-prefixes="#all">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="common_Rosetta_COMMENTARY_blockquote-to-LexisAdvance_blockquote">
<title>(Commentary) <sourcexml>blockquote</sourcexml> to <targetxml>blockquote</targetxml> <lnpid>id-CCCC-10269</lnpid></title>
<body>
	<section>
		<title>Instructions</title>
	    
	    <p><b>AU-Commentary, Form and Precedents:</b> If <sourcexml>blockquote</sourcexml> occurred as a direct child of <sourcexml>level[@leveltype="prec"]/bodytext</sourcexml> and there is no sibling element of <sourcexml>blockquote</sourcexml> then element  <sourcexml>blockquote</sourcexml> will be suppressed but its content will be retained in NL conversion.</p>
    </section>
    
    <example>
        <title>Source XML: element <sourcexml>blockquote</sourcexml> appears as a direct child of <sourcexml>level[@leveltype="prec"]/bodytext</sourcexml></title>
        <codeblock>
            &lt;level id="CFN_ADM.SGM_CFN.ADM.C1.120-1" leveltype="prec" toc-caption="120.1 Form 6: Writ" subdoc="true"&gt;
            &lt;heading searchtype="FORM"&gt;
            &lt;desig searchtype="FORM-NUM"&gt;&lt;designum&gt;&lt;refpt type="ext" id="CFN.ADM.C1.120-1"&gt;&lt;/refpt&gt;120.1&lt;/designum&gt;&lt;/desig&gt;
            &lt;title searchtype="FORM-TITLE"&gt;Form 6: Writ&lt;/title&gt;
            &lt;/heading&gt;
            &lt;bodytext searchtype="FORM"&gt;
            &lt;blockquote&gt;
            &lt;p indent="none"&gt;&lt;text&gt;WRIT&lt;/text&gt;&lt;/p&gt;
            .....
            &lt;/blockquote&gt;
            &lt;/bodytext&gt;
            &lt;/level&gt;

        </codeblock>
    </example>
    
    <example>
        <title>Target XML</title>
        <codeblock>
            &lt;form:form xml:id="CFN_ADM.SGM_CFN.ADM.C1.120-1"&gt;
            &lt;ref:anchor id="CFN.ADM.C1.120-1" anchortype="global"/&gt;
            &lt;form:info&gt;&lt;meta&gt;&lt;metaitem name="levelype" value="prec"/&gt;&lt;/meta&gt;&lt;/form:info&gt;
            &lt;form:document annotated="false" official="false" typeofdoc="unnamed"&gt;
            &lt;heading&gt;
            &lt;desig&gt;120.1&lt;/desig&gt;&lt;title&gt;Form 6: Writ&lt;/title&gt;&lt;/heading&gt;
            &lt;form:bodytext&gt;
            &lt;p indent="none"&gt;&lt;text&gt;WRIT&lt;/text&gt;&lt;/p&gt;
            ....
            &lt;/form:bodytext&gt;
            &lt;/form:document&gt;
            &lt;/form:form&gt;
        </codeblock>
    </example>
    
    <section>
		<title>Changes</title>
		<p>2011-09-12: Created. </p>
    </section>
</body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_Commentary_blockquote-LxAdv-blockquote.dita  -->

	
    <!-- This template occurs, with more specificity, in '/nonamespace/Rosetta_blockquote-LxAdv-blockquote.xsl' -->
	<!--<xsl:template match="blockquote">

		<!-\-  Original Target XPath:  blockquote   -\->
		<blockquote>
			<xsl:apply-templates select="@* | node()"/>
		</blockquote>

	</xsl:template>-->
        
    <xsl:template match="blockquote [not(preceding-sibling::*[1][self::blockquote])][not(following-sibling::*[1][self::blockquote])][parent::bodytext][ancestor::level/@leveltype='prec'][$streamID!='AU05']" priority="30">
         <xsl:apply-templates/>
   	</xsl:template>

    <!-- 2017-10-20 - MDS: pass through blockquote when child of frm:div Webstar 7020061  -->
    <xsl:template match="blockquote[parent::frm:div][l]" priority="25">
        <xsl:apply-templates select="node()"/>
    </xsl:template>
    
</xsl:stylesheet>