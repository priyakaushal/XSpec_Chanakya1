<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
	xmlns:dita="http://dita.oasis-open.org/architecture/2005/"
	xmlns:docinfo="http://www.lexis-nexis.com/glp/docinfo"
	xmlns:cttr="urn:x-lexisnexis:content:citator:sharedservices:1"
	xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/"
	xmlns:source_cttr="http://www.lexis-nexis.com/glp/cttr" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:legisinfo="http://www.lexisnexis.com/xmlschemas/content/legal/legislation-info/1/"
	xmlns:primlawinfo="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw-info/1/"
	xmlns:leg="http://www.lexis-nexis.com/glp/leg"
	xmlns:primlawhist="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw-history/1/"
	xmlns:source_case="http://www.lexis-nexis.com/glp/case"
	xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/" 
	version="2.0" exclude-result-prefixes="cttr dita">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Leg_Citator_AUNZ_Overview_cttr.annotations-CorrespondingForm">
  <title>cttr:annotations[@id="OP4"] - Corresponding Form <lnpid>id-AU20-22240</lnpid></title>
  
  <body>
    <section>
      <p>
        <sourcexml>cttr:annotations[@id="OP4"]</sourcexml> maps to 
        <targetxml>ref:relatedcontent[@xml:id="refsection-OP4"][@contenttype="corresponding-form"]</targetxml>.</p>
      <p>Create <targetxml>ref:anchor[@id="ref-corresponding-form"]</targetxml> inside this 
        <targetxml>ref:relatedcontent</targetxml>.</p>
      <p>
        <sourcexml>cttr:annotations[@id="OP4"]/heading/title</sourcexml> becomes 
        with child elements of <sourcexml>heading/title</sourcexml> becomes 
        <targetxml>ref:relatedcontent/heading/title</targetxml>.</p>
      <p>
        <sourcexml>cttr:annotations[@id="OP4"]/heading/note/p/text</sourcexml> becomes 
        <targetxml>ref:relatedcontent/ref:relatedcontentitem/ref:related-content-link</targetxml>. 
        When <sourcexml>heading/note/p/text/lnlink</sourcexml> occurs map to 
        <targetxml>ref:relatedcontentitem/ref:related-content-link/ref:lnlink</targetxml>
      </p>
    </section>

    <example>
      <title>Example 1: Source cttr:annotations[@id="OP4"]</title>
      <codeblock>
&lt;cttr:annotations id="OP4"&gt;
	&lt;heading&gt;
		&lt;title&gt;Corresponding Form&lt;/title&gt;
		&lt;note&gt;
			&lt;p&gt;
				&lt;text&gt;
					&lt;lnlink service="DOC-ID" refpt="form2" status="unval"&gt;
						&lt;marker&gt;Application to exclude evidence&lt;/marker&gt;
						&lt;api-params&gt;
							&lt;param name="remotekey1" value="DOC-ID"/&gt;
							&lt;param name="remotekey2" value="CTH_REG_1995-44_SCHFORMS"/&gt;
							&lt;param name="dpsi" value="005X"/&gt;
						&lt;/api-params&gt;
					&lt;/lnlink&gt;
				&lt;/text&gt;
			&lt;/p&gt;
		&lt;/note&gt;
	&lt;/heading&gt;
	&lt;cttr:annot&gt;
		&lt;!--Intentionally empty--&gt;
		&lt;comm:info&gt;
			&lt;title/&gt;
		&lt;/comm:info&gt;
	&lt;/cttr:annot&gt;
&lt;/cttr:annotations&gt;
    </codeblock>

      <title>Example 1: Target ref:relatedcontent</title>
      <codeblock>
&lt;ref:relatedcontent xml:id="refsection-OP4" contenttype="corresponding-form"&gt;
	&lt;ref:anchor id="ref-corresponding-form"/&gt;
	&lt;heading&gt;
		&lt;title&gt;Corresponding Form&lt;/title&gt;
	&lt;/heading&gt;
	&lt;ref:relatedcontentitem&gt;
		&lt;ref:related-content-link&gt;
			&lt;ref:lnlink service="DOCUMENT"&gt;
				&lt;ref:marker&gt;Application to exclude evidents&lt;/ref:marker&gt;
				&lt;ref:locator anchoridref="form2"&gt;
					&lt;ref:locator-key&gt;
						&lt;ref:key-name name="DOC-ID"/&gt;
						&lt;ref:key-value value="005X-CTH_REG_1995-44_SCHFORMS"/&gt;
					&lt;/ref:locator-key&gt;
				&lt;/ref:locator&gt;
			&lt;/ref:lnlink&gt;
		&lt;/ref:related-content-link&gt;
	&lt;/ref:relatedcontentitem&gt;
&lt;/ref:relatedcontent&gt;
    </codeblock>
    </example>
    
    <section>
      <title>
        Changes:
      </title>
      <p>2016-06-03: <ph id="change_20160603a_snb">Modified target markup example to match new lnlink structures 
        and instructions.</ph></p>
      <p>2015-12-11: <ph id="change_20151211a_snb">Change source XPATH from 
        <sourcexml>/cttr:annotations/cttr:annot[@id="OP4"]</sourcexml> to 
        cttr:annotations[@id="OP4"], redefined most of the mapping based upon current provision 
        source documents, and updated the example.</ph>
      </p>
      <p>2015-12-04: <ph id="change_20151204i_snb">Added creation of 
        <targetxml>ref:anchor[@id="ref-corresponding-form"]</targetxml>, and changed 
        <targetxml>@contenttype="form"</targetxml> to be <targetxml>@corresponding-form"</targetxml>.</ph>
      </p>
    </section> 
  </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-PAC\AU20_Legislative_Citator\Leg_Citator_AUNZ_Overview_cttr.annotations-CorrespondingForm.dita  -->
	 

	<xsl:template match="source_cttr:annotations[@id='OP4'][normalize-space(.)!='']">
		<ref:relatedcontent>		
			<xsl:attribute name="xml:id">
				<xsl:text>refsection-OP4</xsl:text>				
			</xsl:attribute>
			<xsl:attribute name="contenttype">
				<xsl:text>corresponding-form</xsl:text>	
			</xsl:attribute>
			<xsl:element name="ref:anchor">
				<xsl:attribute name="id"><xsl:text>ref-corresponding-form</xsl:text></xsl:attribute>
			</xsl:element>
			<xsl:apply-templates select="node()"/>
		</ref:relatedcontent>

	</xsl:template>


	<xsl:template match="source_cttr:annotations[@id='OP4']/heading/note">
		<xsl:apply-templates select="@* | node()"/>	
	</xsl:template>
	

	<xsl:template match="source_cttr:annotations[@id='OP4']/heading/note/p/text | source_cttr:annotations[@id='OP4']/heading/note/p/text/lnlink">
		
			<ref:relatedcontentitem>
				<ref:related-content-link>
					<xsl:apply-templates select="@* | node()"/>
				</ref:related-content-link>
			</ref:relatedcontentitem>
		

	</xsl:template>

	
</xsl:stylesheet>