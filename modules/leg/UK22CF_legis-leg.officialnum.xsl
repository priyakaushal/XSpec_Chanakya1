<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:dita="http://dita.oasis-open.org/architecture/2005/"
    xmlns:ci="http://www.lexis-nexis.com/ci" xmlns:leg="http://www.lexis-nexis.com/glp/leg"
    xmlns:funddoc="urn:x-lexisnexis:content:fundamentallegaldocument:sharedservices:1"
    xmlns:primlawinfo="http://www.lexisnexis.com/xmlschemas/content/legal/primarylaw-info/1/"
    version="2.0" exclude-result-prefixes="dita ci leg">

    <dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="legis-leg.officialnum">
        <title>
            <sourcexml>leg:officialnum</sourcexml>
            <lnpid>id-UK22CF-39017</lnpid>
        </title>
        <body>
            <section>
                <p><sourcexml>leg:officialnum</sourcexml> becomes
                        <targetxml>funddoc:body/primlaw:level/primlaw:bodytext/primlaw:excerpt/primlaw:level/primlaw:levelinfo/primlawinfo:primlawinfo/primlawinfo:identifier</targetxml>
                    with required attribute <targetxml>@idtype</targetxml>. <ul>
                        <li><sourcexml>leg:year</sourcexml> becomes
                                <targetxml>primlawinfo:identifier-component/@type="year"</targetxml>.</li>
                        <li><sourcexml>leg:seriesnum</sourcexml> becomes
                                <targetxml>primlawinfo:identifier-component/@type="seriesnum"</targetxml>.</li>
                    </ul>
                    <note>If <sourcexml>leg:officialnum</sourcexml> does not contain
                            <sourcexml>leg:year</sourcexml> and <sourcexml>ci:cite</sourcexml>
                        occurred as a child of <sourcexml>leg:officialnum</sourcexml> then this is
                        considered a data error.</note>
                    <note>For handling <b>@ln.user-displayed</b> attribute, refer the general markup
                            <xref
                            href="../../common_newest/Rosetta_leg.officialnum_ln.user-displayed-LxAdv-primlawinfo.identifier_source.dita"
                            >ln.user_displayed="false"</xref> section in the CI.</note>
                </p>
            </section>
            <example>
                <codeblock>

&lt;leg:info&gt;
        &lt;leg:officialnum&gt;SI 1955/156 &lt;leg:year&gt;1955 &lt;/leg:year&gt;
            &lt;leg:seriesnum&gt;156 &lt;/leg:seriesnum&gt;
        &lt;/leg:officialnum&gt;
        &lt;leg:officialname&gt;Consular Conventions (Income Tax) (Kingdom of Norway) Order 1955 &lt;/leg:officialname&gt;
        &lt;leg:dates&gt;
            &lt;leg:enactdate&gt;Made &lt;date day="01" month="02" year="1955"&gt;1 February 1955 &lt;/date&gt;
            &lt;/leg:enactdate&gt;
        &lt;/leg:dates&gt;
    &lt;/leg:info&gt;

      </codeblock>
                <b>Becomes</b>
                <codeblock>

&lt;primlaw:levelinfo&gt;
        &lt;primlawinfo:primlawinfo&gt;
            &lt;primlawinfo:identifier idtype="officialnum"&gt;SI 1955/156
                &lt;primlawinfo:identifier-component type="1955"&gt;1955&lt;/primlawinfo:identifier-component&gt;
                &lt;primlawinfo:identifier-component type="156"&gt;156&lt;/primlawinfo:identifier-component&gt;
            &lt;/primlawinfo:identifier&gt;
            &lt;legisinfo:legisinfo&gt;
                &lt;legisinfo:names&gt;
                    &lt;legisinfo:officialtitle source="editoriallyassigned"&gt;Consular Conventions (Income Tax) (Kingdom of Norway)
                        Order 1955 &lt;/legisinfo:officialtitle&gt;
                &lt;/legisinfo:names&gt;
            &lt;/legisinfo:legisinfo&gt;
            &lt;primlawinfo:dates&gt;
                &lt;primlawinfo:enactdate day="01" month="02" year="1955" normdate="1955-02-01"&gt;Made
                    &lt;date-text&gt;1 February 1955 &lt;/date-text&gt;
                &lt;/primlawinfo:enactdate&gt;
            &lt;/primlawinfo:dates&gt;
        &lt;/primlawinfo:primlawinfo&gt;
    &lt;/primlaw:levelinfo&gt;
      </codeblock>
            </example>
            <section>
                <title>Changes</title>
                <p>2016-09-19: <ph id="change_20160919_RS">Created</ph></p>
            </section>
        </body>
    </dita:topic>

    <!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
    <!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-UK\UK22CF\legis-leg.officialnum.dita  -->


    <xsl:template match="leg:officialnum">

        <!--  Original Target XPath:  funddoc:body/primlaw:level/primlaw:bodytext/primlaw:excerpt/primlaw:level/primlaw:levelinfo/primlawinfo:primlawinfo/primlawinfo:identifier   -->

        <primlawinfo:identifier>
            <xsl:attribute name="idtype">
                <xsl:text>officialnum</xsl:text>
            </xsl:attribute>
            <xsl:apply-templates select="@* | node()"/>
        </primlawinfo:identifier>

    </xsl:template>

   

    <xsl:template match="leg:seriesnum">

        <!--  Original Target XPath:  primlawinfo:identifier-component/@type="seriesnum"   -->
        <primlawinfo:identifier-component>
            <xsl:attribute name="type">
                <xsl:text>seriesnum</xsl:text>
            </xsl:attribute>
            <xsl:apply-templates select="@* | node()"/>
        </primlawinfo:identifier-component>

    </xsl:template>

</xsl:stylesheet>
