<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" 
 xmlns:glp="http://www.lexis-nexis.com/glp"
 xmlns:leg="http://www.lexis-nexis.com/glp/leg" version="2.0" exclude-result-prefixes="dita leg glp">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Regulatory-From-Services-leg.heading">
   <title>leg:heading <lnpid>id-NZ12-24812</lnpid></title>
   <body>
      <section>
         <ul>
         	<li>
     <sourcexml>leg:heading</sourcexml>
     <b>becomes</b>
     <targetxml>heading</targetxml> with attributes <sourcexml>@inline</sourcexml>
     <b>becomes</b>
     <targetxml>@inline</targetxml> which has tokenized values and populated as: <ul>
      <li><targetxml>heading[@inline="true"]</targetxml></li>
      <li><targetxml>heading[@inline="false"]</targetxml></li>
     </ul>
     <pre>
         			<b><i>Example: Source XML 1</i></b>

&lt;leg:level id="HIC1994SCHD1"&gt;
 &lt;leg:level-vrnt leveltype="schedule" searchtype="LEGISLATION SCHEDULE" subdoc="false" toc-caption="Schedule 1 Specified Health Agencies"&gt;
  &lt;leg:heading&gt;
   &lt;desig searchtype="SCH-NUM"&gt;
    &lt;designum&gt;&lt;refpt id="HIC1994SCHD1" type="ext"/&gt;Schedule 1&lt;/designum&gt;
   &lt;/desig&gt;
   &lt;title searchtype="SCH-TITLE"&gt;Specified Health Agencies&lt;/title&gt;
   &lt;leg:empleg&gt;Subclause 4(2)&lt;/leg:empleg&gt;
  &lt;/leg:heading&gt;
  &lt;!-- ETC. --&gt;
 &lt;/leg:level-vrnt&gt;
&lt;/leg:level&gt;

         		</pre>
     <pre>
         			<b><i>Example: Target XML 1</i></b>

&lt;admindoc:level alternatetoccaption="Schedule 1 Specified Health Agencies" includeintoc="false" leveltype="schedule"&gt;
 &lt;ref:anchor id="HIC1994SCHD1" anchortype="global"/&gt;
 &lt;heading&gt;
  &lt;desig value="1"&gt;SCHEDULE 1&lt;/desig&gt;
  &lt;title&gt;Specified Health Agencies&lt;/title&gt;
 &lt;/heading&gt;
 &lt;admindoc:authority&gt;
  &lt;admindoc:authorityitem&gt;
   &lt;textitem&gt;Subclause 4(2)&lt;/textitem&gt;
  &lt;/admindoc:authorityitem&gt;
 &lt;/admindoc:authority&gt;
 &lt;!-- ETC. --&gt;
&lt;/admindoc:level&gt;

         		</pre>
     <pre>
         			<b><i>Example: Source XML 2 - Handling of 'leg:heading' with '@inline' attribute</i></b>

&lt;leg:level id="SR-2002315-SCHD1-3"&gt;
 &lt;leg:level-vrnt leveltype="clause" searchtype="LEGISLATION CLAUSE" subdoc="true" toc-caption="cl 3. Description of proportionate ownership scheme"&gt;
  &lt;leg:heading inline="true"&gt;
   &lt;title searchtype="CLAUSE-TITLE"&gt;&lt;refpt id="SR-2002315-SCHD1-3" type="ext"/&gt;Description of proportionate ownership scheme&lt;/title&gt;
   &lt;desig searchtype="CLAUSE-NUM"&gt;
    &lt;designum&gt;3.&lt;/designum&gt;
   &lt;/desig&gt;
  &lt;/leg:heading&gt;
  &lt;!-- ETC. --&gt;
&lt;/leg:level&gt;

         		</pre>
     <pre>
         			<b><i>Example: Target XML 2</i></b>

&lt;admindoc:level alternatetoccaption="cl 3. Description of proportionate ownership scheme" includeintoc="true" leveltype="clause"&gt;
 &lt;ref:anchor id="SR-2002315-SCHD1-3" anchortype="global"/&gt;
 &lt;heading&gt;
  &lt;desig value="3" followstitle="true"&gt;3.&lt;/desig&gt;
  &lt;title&gt;Description of proportionate ownership scheme&lt;/title&gt;
 &lt;/heading&gt;
 &lt;!-- ETC. --&gt;
&lt;/admindoc:level&gt;

         		</pre>
    </li>
         </ul>
      </section>
   </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-PAC\NZ12_Regulatory_Material_From_Services\Regulatory-From-Services-leg.heading.dita  -->
	
 <xsl:template match="leg:heading/@align">
  <xsl:copy-of select="."/>
 </xsl:template>
 
 <xsl:template match="leg:heading/@inline | leg:heading/desig/@inline | leg:heading/edpnum/@inline | leg:heading/title/@inline" priority="25">   
  <xsl:if test="not(parent::*[ancestor-or-self::leg:heading[parent::leg:level-vrnt[(@leveltype=('clause', 'section', 'sect', 'conv.sect' , 'regulation' , 'reg'))]]])">
   <xsl:copy-of select="."/>
  </xsl:if>    
 </xsl:template> 
 
 <xsl:template match="leg:heading">
  <heading xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
   <xsl:apply-templates select="@* | node() except (refpt | leg:empleg | glp:note | leg:histnote)"/>
  </heading>
 </xsl:template>
 
 <xsl:template match="leg:bodytext/leg:heading">
  <xsl:if test="title or subtitle">
   <h xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/">
    <xsl:apply-templates select="title/node() | subtitle/node()"/>
   </h>
  </xsl:if>
 </xsl:template> 
 

 
 <xsl:template match="leg:heading[not(@*)][title[normalize-space(replace(., '[\t\p{Zs}]', '')) = '']][not(child::*[2])]" priority="30"/>
 
</xsl:stylesheet>