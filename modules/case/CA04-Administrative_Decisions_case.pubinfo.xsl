<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:ci="http://www.lexis-nexis.com/ci"  xmlns:glp="http://www.lexis-nexis.com/glp" xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" xmlns:case="http://www.lexis-nexis.com/glp/case" version="2.0" exclude-result-prefixes="dita case glp ci">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.pubinfo">
   <title>case:pubinfo <lnpid>id-CA04-13433</lnpid></title>  
  <body>
    <section>
      <p><sourcexml>case:pubinfo</sourcexml> becomes <targetxml>note</targetxml> with the value of <targetxml>note/@notetype</targetxml> set to
        "other".</p>
      <p><sourcexml>case:pubinfo</sourcexml> should be suppressed if it contains any of the
        following values: <ul>
          <li>** Preliminary Version **</li>
          <li>** Unedited **</li>
          <li>** Version textuele **</li>
          <li>Intitulé de la cause :</li>
          <li>** Translation**</li>
          <li>**Translation **</li>
          <li>* Translation **</li>
          <li>** Version textuelle**</li>
          <li>* Traduction **</li>
          <li>** Traducation **</li>
          <li>** Traducion **</li>
          <li>** Traduction *</li>
          <li>** Traduction ***</li>
          <li>** Traduction**</li>
          <li>** Translation</li>
          <li>** Translation **)</li>
          <li>** Translation**</li>
          <li>**Traduction **</li>
          <li>**: Traduction **</li>
          <li>'@c** Traduction **</li>
          <li>'@** Traduction **</li>
          <li>Rpertori:</li>
          <li>** Version textuellle **</li>
          <li>** Translations **</li>
          <li>**Translation **</li>
          <li>** Version textuelle**</li>
          <li>** Version textuelle **#</li>
          <li>** Version Textuelle **</li>
          <li>** Version textuelle *</li>
          <li>** Version textuelle</li>
          <li>** Version franaise **</li>
          <li>** Version francaise **</li>
          <li>** Unofficial Translation [*] **</li>
          <li>** Unofficial Translation ** [*]</li>
        </ul></p>
      <p>The content of <sourcexml>case:pubinfo</sourcexml> should be placed in <targetxml>note/bodytext/p/text</targetxml>.</p>
     <!--  <note>Kindly refer the spreadsheet posted in Administrative Decisions discussion boards having valid and invalid entries of <sourcexml>case:pubinfo</sourcexml>.</note>-->
    </section>
    <example>
      <title>Mapping of <sourcexml>case:pubinfo</sourcexml></title>
      <codeblock>

&lt;case:pubinfo&gt;** Traduction **&lt;/case:pubinfo&gt;

           </codeblock>
      <b>becomes</b>
      <codeblock>

&lt;note notetype="other"&gt;
  &lt;bodytext&gt;
    &lt;p&gt;
      &lt;text&gt;** Traduction **&lt;/text&gt;
    &lt;/p&gt;
  &lt;/bodytext&gt;
&lt;/note&gt;

           </codeblock>
    </example>
    <section><title>Changes</title>
    <p>2014-07-17: <ph id="change_20140717_AS">Added the list of values when <sourcexml>case:pubinfo</sourcexml> needs to be suppressed.</ph></p>
    </section>
  </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.pubinfo.dita  -->
	<!--<xsl:message>CA04-Administrative_Decisions_case.pubinfo.xsl requires manual development!</xsl:message> -->
<!-- need to add more values in contains -->
	
  <xsl:template match="case:pubinfo">
    <xsl:choose>
      <xsl:when test="following-sibling::case:pubinfo">
        <xsl:if test="not(contains(.,'** Preliminary Version **') or contains(.,'** Unedited **') or contains(.,'** Version textuele **') or contains(.,'Intitulé de la cause :')  )">
        <note notetype='other'>
          <bodytext>
            <p>
              <text>
                <xsl:apply-templates select="@* | node()"/>
              </text>
            </p>
            <xsl:for-each select="following-sibling::case:pubinfo">
              <p>
                <text>
                  <xsl:apply-templates select="@* | node()"/>
                </text>
              </p>
            </xsl:for-each>
          </bodytext>
        </note>
        </xsl:if>
      </xsl:when>
      <xsl:otherwise>
        <xsl:if test="not(contains(.,'** Preliminary Version **') or contains(.,'** Unedited **') or contains(.,'** Version textuele **') or contains(.,'Intitulé de la cause :')  )">
          <note notetype='other'>
            <bodytext>
              <p>
                <text>
                  <xsl:apply-templates select="@* | node()"/>
                </text>
              </p>
            </bodytext>
          </note>
        </xsl:if>
      </xsl:otherwise>
    </xsl:choose>
   
	</xsl:template>

<!-- inline object handling for CA04 -->
  <xsl:template match="inlineobject[$streamID='CA04']" priority="25">
    
    <xsl:apply-templates select="." mode="refinline"/>
  </xsl:template>
  
  <xsl:template match="figure/p" priority="25">
    <xsl:apply-templates select="@*|node()"/>
  </xsl:template>
  
  <xsl:template match="text[ancestor::figure]" priority="25">
    <xsl:apply-templates select="@*|node()"/>
  </xsl:template>
  
</xsl:stylesheet>