<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" xmlns:case="http://www.lexis-nexis.com/glp/case" xmlns:location="http://www.lexisnexis.com/xmlschemas/content/shared/location/1/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:jurisinfo="http://www.lexisnexis.com/xmlschemas/content/legal/jurisdiction-info/1/" version="2.0" exclude-result-prefixes="dita case">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="NZ03_Rosetta_case.juris">
  <title>case:juris <lnpid>id-NZ03-23028</lnpid></title>
  <body>
    <section>
      <ul>
        <li>
          <sourcexml>case:juris</sourcexml> becomes
            <targetxml>jurisinfo:courtinfo/jurisinfo:jurisdiction/jurisinfo:system</targetxml> and
          create <targetxml>dc:metadata/dc:coverage/location:country</targetxml> with attributes
            <targetxml>@codescheme="ISO-3166-1"</targetxml> and
            <targetxml>@countrycode="NZ"</targetxml>. And the value for
            <targetxml>jurisinfo:courtinfo/jurisinfo:alternatecourtcode/@alternatecourtcode</targetxml>
          will be picked up from <sourcexml>case:courtcode</sourcexml>.<pre xml:space="preserve">

&lt;case:courtinfo&gt;
  ...
  &lt;case:courtcode&gt;NZCA&lt;/case:courtcode&gt;
  ...
  &lt;case:juris&gt;NZ&lt;/case:juris&gt;
&lt;/case:courtinfo&gt;

<b>Becomes</b>

&lt;jurisinfo:courtinfo&gt;
  &lt;jurisinfo:alternatecourtcode alternatecourtcode="NZCA" /&gt;
  &lt;jurisinfo:jurisdiction&gt;
    &lt;jurisinfo:system&gt;NZ&lt;/jurisinfo:system&gt;
  &lt;/jurisinfo:jurisdiction&gt;
&lt;/jurisinfo:courtinfo&gt;

&lt;dc:coverage&gt;
  &lt;location:country codescheme="ISO-3166-1" countrycode="NZ"/&gt;
&lt;/dc:coverage&gt;

</pre>
          <note>The ordering of the <targetxml>jurisinfo:alternatecourtcode</targetxml> and
              <targetxml>jurisinfo:jurisdiction\jurisinfo:system</targetxml> is not significant in
            terms of display.</note>
        </li>
      </ul>
    </section>
  </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-PAC\NZ03_CaseLaw\NZ03_Rosetta_case.juris.dita  -->
	<!--<xsl:message>NZ03_Rosetta_case.juris.xsl requires manual development!</xsl:message>--> 

  <xsl:template match="case:juris">
    
    <!--  Original Target XPath:  jurisinfo:courtinfo/jurisinfo:jurisdiction/jurisinfo:system   -->
    <xsl:choose>
      <xsl:when test="not(following-sibling::case:juris)">
    <jurisinfo:jurisdiction>
      <xsl:apply-templates select="../case:courtloc"/>
      <jurisinfo:system>
        <xsl:apply-templates select="@* | node()"/>
      </jurisinfo:system>
    </jurisinfo:jurisdiction>
      </xsl:when>
    </xsl:choose>
  </xsl:template>
  
  <xsl:template match="case:juris" mode="metadata">
    <xsl:choose>
    <xsl:when test="not(following-sibling::case:juris)">
    <dc:coverage>
      <location:country>
        <xsl:attribute name="countrycode" select="'NZ'"/>
        <xsl:attribute name="codescheme">ISO-3166-1</xsl:attribute>       
      </location:country>						
    </dc:coverage>
    </xsl:when>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet>