<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:doc="http://www.lexisnexis.com/xmlschemas/content/shared/document-level-metadata/1/" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" xmlns:case="http://www.lexis-nexis.com/glp/case" version="2.0" exclude-result-prefixes="dita case">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="case.length">
   <title>case:length <lnpid>id-CA04-13430</lnpid></title>
   <body>
      <section>
        <ul>
         <li class="- topic/li ">
          <sourcexml class="+ topic/keyword xml-d/sourcexml ">case:length</sourcexml> becomes
            <targetxml class="+ topic/keyword xml-d/targetxml ">/doc:docinfo/doc:doclength</targetxml>; the conversion also converts the attributes
            <targetxml class="+ topic/keyword xml-d/targetxml ">@num</targetxml> will contain the
          numeric value from source PCData, <targetxml class="+ topic/keyword xml-d/targetxml ">@source="conversion"</targetxml> and <targetxml class="+ topic/keyword xml-d/targetxml ">@unit</targetxml> will contain the textual value from source PCData. <pre xml:space="preserve" class="- topic/pre ">

&lt;case:length&gt;(1232 paras.)&lt;/case:length&gt;

<b class="+ topic/ph hi-d/b ">Becomes</b>

&lt;doc:docinfo&gt; 
  &lt;doc:doclength num="1232" source="conversion" unit="Paras"/&gt;
&lt;/doc:docinfo&gt;
</pre>
          
        </li>
        </ul>
      </section>
     <note><p>Exception for Canada: Conversion should add period (.) when <targetxml>@unit</targetxml>
        attribute is having values (paras, para, paragr, pp and p), for more clarification refer
        below example.</p></note>
     
     <pre>
&lt;case:length&gt;(1 para.)&lt;/case:length&gt;

<b>Becomes</b>

&lt;doc:doclength num="1" unit="para." source="conversion"/&gt;
</pre>
     
     <pre>
&lt;case:length&gt;(2 pages)&lt;/case:length&gt;

<b>Becomes</b>

&lt;doc:doclength num="2" unit="pages" source="conversion"/&gt;
        </pre>
     
     <pre>
&lt;case:length&gt;(158 pp.)&lt;/case:length&gt;

<b>Becomes</b>

&lt;doc:doclength num="158" unit="pp." source="conversion"/&gt;
        </pre>
     
     <pre>
&lt;case:length&gt;(8 pages) (36 paras.)&lt;/case:length&gt;

<b>Becomes</b>

&lt;doc:doclength num="8" unit="pages" source="conversion"/&gt;
&lt;doc:doclength num="36" unit="paras." source="conversion"/&gt;
</pre>
     
     <section>
       <title>Changes</title>
       <p>2014-04-22: <ph id="change_20140422_VA">Added list of abbreviated values for
            <targetxml>@unit</targetxml> attribute, R4.5 Content Issue #:1402. This change
          immediately applies to CA04-Admindoc.</ph></p>
       <p>2014-04-18: <ph id="change_20140418_VA">Added note and example for Canada content to
         add period (.) in <targetxml>@unit</targetxml> attribute, R4.5 Content Issue
         #:1402. This change immediately applies to CA04-Admindoc.</ph></p>
     </section>
   </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA04-Administrative_Decisions\case.length.dita  -->
<!--	<xsl:message>CA04-Administrative_Decisions_case.length.xsl requires manual development!</xsl:message>--> 
<!-- this will be in metadata -->
	<xsl:template match="case:length">
			<doc:doclength>
				<xsl:attribute name="num">
				  <xsl:analyze-string select="." regex="\((\d*)\s*([a-zA-Z]*)">
				    <xsl:matching-substring>
				      <xsl:value-of select="regex-group(1)"/>
				    </xsl:matching-substring>
				  </xsl:analyze-string>
				</xsl:attribute>
			  <xsl:attribute name="unit">
			    <xsl:analyze-string select="." regex="\((\d*)\s*([a-zA-Z]*)">
			      <xsl:matching-substring>
			        <xsl:value-of select="regex-group(2)"/>
			      </xsl:matching-substring>
			    </xsl:analyze-string>
			    <xsl:text>.</xsl:text>
			  </xsl:attribute>
			  <xsl:attribute name="source">
			    <xsl:text>conversion</xsl:text>
			  </xsl:attribute>
			</doc:doclength>
	</xsl:template>

</xsl:stylesheet>