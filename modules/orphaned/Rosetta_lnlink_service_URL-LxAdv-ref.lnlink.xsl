<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" xmlns:proc="http://www.lexisnexis.com/xmlschemas/content/shared/process-elements/1/" xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/" version="2.0" exclude-result-prefixes="dita">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Rosetta_lnlink_service_ATTACHMENT-to-LexisAdvance_ref.lnlink">
		<title><sourcexml>lnlink[@service="URL"]</sourcexml> to <targetxml>ref:lnlink[@service="URL"]</targetxml>
			<lnpid>id-CCCC-10526</lnpid></title>
		<body>
			<section>
				<p><sourcexml>lnlink[@service="URL"]</sourcexml> becomes <targetxml>ref:lnlink[@service="URL"]</targetxml>, and its child elements are transformed as follows: <ul>
						<li>The attribute <sourcexml>lnlink/@status</sourcexml> is always suppressed, it is never output to the target document.</li>
						<li><sourcexml>lnlink/marker</sourcexml> becomes <targetxml>ref:lnlink/ref:marker</targetxml>, with attribute <sourcexml>marker/@role</sourcexml> becoming <targetxml>ref:marker/@role</targetxml> if present</li>
						<li>Create <targetxml>ref:lnlink/ref:locator</targetxml> and populate as follows:<ul>
								<li><b><u>if and only if</u></b> there is an <sourcexml>lnlink/api-params/param</sourcexml> where <sourcexml>param/@name="URL"</sourcexml>, then this <sourcexml>param</sourcexml> becomes <targetxml>ref:locator/ref:locator-key/ref:key-name/@name="URL"</targetxml>, then a sibling <targetxml>ref:key-value</targetxml> element is also created, and the attribute <sourcexml>param/@value</sourcexml> becomes
										<targetxml>ref:locator/ref:locator-key/ref:key-value/@value</targetxml>.</li>
								<li>otherwise <sourcexml>lnlink/api-params</sourcexml> becomes <targetxml>ref:locator/ref:locator-params</targetxml>, and its child elements are transformed as follows:<ul>
										<li>all other <sourcexml>api-params/param</sourcexml> elements (<b><u>with the exception of</u></b>
											<sourcexml>param/@name="URL"</sourcexml>) become <targetxml>ref:locator-params/proc:param</targetxml>, with attribute <sourcexml>param/@name</sourcexml> becoming <targetxml>proc:param/@name</targetxml> and attribute <sourcexml>param/@value</sourcexml> becoming <targetxml>proc:param/@value</targetxml>.</li>
									</ul>
								</li>
							</ul>
						</li>
					</ul>
				</p>
			</section>
			<example>
				<title>Source XML</title>
				<codeblock> &lt;lnlink service="URL"&gt; &lt;api-params&gt; &lt;param name="URL" value="http://www.dol.gov/whd/regs/compliance/posters/fmlaen.pdf"/&gt; &lt;/api-params&gt; &lt;/lnlink&gt; </codeblock>
			</example>
			<example>
				<title>Target XML 3</title>
				<codeblock> &lt;ref:lnlink service="URL"&gt; &lt;ref:locator&gt; &lt;ref:locator-key&gt; &lt;ref:key-name name="URL"/&gt; &lt;ref:key-value value="http://www.dol.gov/whd/regs/compliance/posters/fmlaen.pdf"/&gt; &lt;/ref:locator-key&gt; &lt;/ref:locator&gt; &lt;/ref:lnlink&gt; </codeblock>
			</example>
			<section>
				<title>Changes</title>
				<p>2015-09-08: <ph id="change_20150908_SNB">Minor XPATH correction in instruction title and body to change <sourcexml>lnlink/@service="URL"</sourcexml> to be <sourcexml>lnlink[@service="URL"]</sourcexml>, <targetxml>ref:lnlink</targetxml> to be <targetxml>ref:lnlink[@service="URL"]</targetxml>, and <targetxml>ref:lnlink/@service="URL"</targetxml> to be <targetxml>ref:lnlink[@service="URL"]</targetxml>.</ph></p>
				<p>2015-09-03: <ph id="change_20150903_snb">Correction to change <targetxml>ref:locator/ref:key-name/@name="URL"</targetxml> to instead be <targetxml>ref:locator/ref:locator-key/ref:key-name/@name="URL"</targetxml>.</ph></p>
				<p>2015-07-16: <ph id="change_20150716_bmh">Added topic for <sourcexml>lnlink[@service="URL"]</sourcexml>.</ph></p>
			</section>
		</body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_lnlink_service_URL-LxAdv-ref.lnlink.dita  -->
	<!--<xsl:message>Rosetta_lnlink_service_URL-LxAdv-ref.lnlink.xsl requires manual development!</xsl:message> -->

	<xsl:template match="lnlink[@service=&#34;URL&#34;]">

		<!--  Original Target XPath:  ref:lnlink[@service="URL"]   -->
		<ref:lnlink>
			<xsl:apply-templates select="@* | node()"/>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="lnlink/@status">

		<!--  Original Target XPath:  ref:lnlink/ref:marker   -->
		<ref:lnlink>
			<ref:marker>
				<!--<xsl:apply-templates select="@* | node()"/>-->
				<xsl:value-of select="."/>
			</ref:marker>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="lnlink/marker">

		<!--  Original Target XPath:  ref:lnlink/ref:marker   -->
		<ref:lnlink>
			<ref:marker>
				<xsl:apply-templates select="@* | node()"/>
			</ref:marker>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="marker/@role">

		<!--  Original Target XPath:  ref:marker/@role   -->
		<ref:marker>
			<xsl:attribute name="role">
				<!--<xsl:apply-templates select="node()"/>-->
				<xsl:value-of select="."/>
			</xsl:attribute>
		</ref:marker>

	</xsl:template>

	<xsl:template match="lnlink/api-params/param">

		<!--  Original Target XPath:  ref:locator/ref:locator-key/ref:key-name/@name="URL"   -->
		<ref:locator>
			<ref:locator-key>
				<ref:key-name>
					<xsl:attribute name="name">
						<xsl:text>URL</xsl:text>
					</xsl:attribute>
				</ref:key-name>
			</ref:locator-key>
		</ref:locator>

	</xsl:template>

	<!--<xsl:template match="param/@name=&#34;URL&#34;">-->
	<xsl:template match="param/@name[.=&#34;URL&#34;]">
		<!--  Original Target XPath:  ref:locator/ref:locator-key/ref:key-name/@name="URL"   -->
		<ref:locator>
			<ref:locator-key>
				<ref:key-name>
					<xsl:attribute name="name">
						<xsl:text>URL</xsl:text>
					</xsl:attribute>
				</ref:key-name>
			</ref:locator-key>
		</ref:locator>

	</xsl:template>

	<xsl:template match="param">

		<!--  Original Target XPath:  ref:locator/ref:locator-key/ref:key-name/@name="URL"   -->
		<ref:locator>
			<ref:locator-key>
				<ref:key-name>
					<xsl:attribute name="name">
						<xsl:text>URL</xsl:text>
					</xsl:attribute>
				</ref:key-name>
			</ref:locator-key>
		</ref:locator>

	</xsl:template>

	<xsl:template match="param/@value">

		<!--  Original Target XPath:  ref:locator/ref:locator-key/ref:key-value/@value   -->
		<ref:locator>
			<ref:locator-key>
				<ref:key-value>
					<xsl:attribute name="value">
						<!--						<xsl:apply-templates select="node()"/>-->
						<xsl:value-of select="."/>
					</xsl:attribute>
				</ref:key-value>
			</ref:locator-key>
		</ref:locator>

	</xsl:template>

	<xsl:template match="lnlink/api-params">

		<!--  Original Target XPath:  ref:locator/ref:locator-params   -->
		<ref:locator>
			<ref:locator-params>
				<xsl:apply-templates select="@* | node()"/>
			</ref:locator-params>
		</ref:locator>

	</xsl:template>

	<xsl:template match="api-params/param">

		<!--  Original Target XPath:  ref:locator-params/proc:param   -->
		<ref:locator-params>
			<proc:param>
				<xsl:apply-templates select="@* | node()"/>
			</proc:param>
		</ref:locator-params>

	</xsl:template>

	<xsl:template match="param/@name">

		<!--  Original Target XPath:  proc:param/@name   -->
		<proc:param>
			<xsl:attribute name="name">
				<!--<xsl:apply-templates select="node()"/>-->
				<xsl:value-of select="."/>
			</xsl:attribute>
		</proc:param>

	</xsl:template>

	<!--<xsl:template match="lnlink/@service=&#34;URL&#34;">-->
	<xsl:template match="lnlink/@service[.=&#34;URL&#34;]">
		<!--  Original Target XPath:  ref:lnlink   -->
		<ref:lnlink>
			<!--<xsl:apply-templates select="@* | node()"/>-->
			<xsl:value-of select="."/>
		</ref:lnlink>

	</xsl:template>

</xsl:stylesheet>
