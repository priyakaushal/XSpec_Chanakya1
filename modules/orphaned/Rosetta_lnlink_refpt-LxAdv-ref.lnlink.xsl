<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" xmlns:ref="http://www.lexisnexis.com/xmlschemas/content/shared/reference/1/" version="2.0" exclude-result-prefixes="dita">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="Rosetta_lnlink_refpt-LxAdv-ref.lnlink">
  <title><sourcexml>lnlink[@refpt][not(@service)]</sourcexml> to <targetxml>ref:lnlink</targetxml>
    <lnpid>id-CCCC-10543</lnpid></title>
  <body>
    <section>
      <p>The following instruction is intended illustrate proper mapping of 
        <sourcexml>lnlink[@refpt][not(@service)]</sourcexml> and its child elements to 
        <targetxml>ref:lnlink</targetxml> and its child elements. This instruction does not apply when the 
        <sourcexml>lnlink/@service</sourcexml> attribute is present.</p>
      <note>EXCEPTION: If either <sourcexml>lnlink/api-params/param[@name="remotekey1"][@value="DOC-ID" or @value="DOCID"]</sourcexml> 
        or <sourcexml>lnlink/key-name[@name="DOC-ID" OR @name="DOCID"]</sourcexml> exists, then do not use this 
          mapping instruction and instead use the instructions in 
          <xref href="Rosetta_lnlink_service_DOCID-LxAdv-ref.lnlink.dita"><sourcexml>lnlink[@service="DOC-ID" or @service="DOCID"]</sourcexml> 
          to <targetxml>ref:lnlink[@service="DOCUMENT"]</targetxml></xref>.</note>
      
      <p><sourcexml>lnlink[@refpt][not(@service)]</sourcexml> and its child elements are mapped to  
        <targetxml>ref:lnlink</targetxml> as follows:
        <ul>
          <li><sourcexml>lnlink</sourcexml> maps to <targetxml>ref:lnlink</targetxml></li>
          <li><sourcexml>lnlink/marker</sourcexml> maps to <targetxml>ref:lnlink/ref:marker</targetxml></li>
          <li><sourcexml>lnlink/marker/@role</sourcexml> maps to <targetxml>ref:lnlink/ref:marker/@role</targetxml></li>
          <li><sourcexml>lnlink/marker/@status</sourcexml> is suppressed.</li>
          <li> Create <targetxml>ref:lnlink/ref:locator</targetxml> with
            attributes and children as follows: 
            <ul>
              <li><sourcexml>lnlink/@refpt</sourcexml> maps to <targetxml>ref:lnlink/ref:locator/@anchoridref</targetxml></li>
              <li><note><targetxml>ref:locator/@anchoridref</targetxml> that begins with a number must
                have an underscore added at start. Also apply other identifier data type format as
                used for <targetxml>xml:id</targetxml> and <targetxml>ref:anchor/@id</targetxml>
                (e.g. change colon to underscore). Refer to the section titled "Identifiers to ID Data Type - 
                Handling Pattern Restrictions", if that section exists in this CI.</note></li>              
            </ul>
          </li>
        </ul>
      </p>
            
    </section>
    <example>
      <title>Example Source Markup for <sourcexml>lnlink[@service="DOC-ID" or @service="DOCID"]</sourcexml> to <targetxml>ref:lnlink[@service="DOCUMENT"]</targetxml></title>
      <codeblock>
      
• Internal Target Anchor link (to a specific anchor in the same document)
&lt;lnlink status="valid" refpt="CTH_ACT_2008-135_SCH1PT1"&gt;
                &lt;marker role="content"&gt;(CTH) EVIDENCE AMENDMENT ACT 2008&lt;/marker&gt;
&lt;/lnlink&gt;
      
    </codeblock>

      <title>Example Target Markup for <targetxml>ref:lnlink[@service="DOCUMENT"]</targetxml></title>
      <codeblock>
      
• Internal Target Anchor link (to a specific anchor in the same document)
&lt;ref:lnlink&gt;
    &lt;ref:marker role="content"&gt;(CTH) EVIDENCE AMENDMENT ACT 2008&lt;/ref:marker&gt;
    &lt;ref:locator anchoridref="CTH_ACT_2008-135_SCH1PT1"/&gt;
&lt;/ref:lnlink&gt;
      
    </codeblock>
    </example>


    <section>
      <title>Changes</title>
      <p>2016-11-16: <ph id="change_20161116_snb">Added to note regarding applying any rules related to 
        <targetxml>@anchoridref</targetxml>, referring specifically to section for "Identifiers to ID Data Type - 
        Handling Pattern Restrictions".</ph>
      </p>
      <p>2016-06-07: <ph id="change_20160607_snb">Moved standard lnlink mapping from "Standardization of 
        Output for lnlink Conversion" to new General Markup sections, and rewrote the mapping instructions 
        to be consistent with the new AU20 Rosetta XML markup structure.</ph></p>
    </section>
  </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\common_newest\Rosetta_lnlink_refpt-LxAdv-ref.lnlink.dita  -->
	<xsl:message>Rosetta_lnlink_refpt-LxAdv-ref.lnlink.xsl requires manual development!</xsl:message> 

	<xsl:template match="lnlink[@refpt][not(@service)]">

		<!--  Original Target XPath:  ref:lnlink   -->
		<ref:lnlink>
			<xsl:apply-templates select="@* | node()"/>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="lnlink/@service">

		<!--  Original Target XPath:  ref:lnlink[@service="DOCUMENT"]   -->
		<ref:lnlink>
			<xsl:apply-templates select="@* | node()"/>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="lnlink/api-params/param[@name=&#34;remotekey1&#34;][@value=&#34;DOC-ID&#34; or @value=&#34;DOCID&#34;]">

		<!--  Original Target XPath:  ref:lnlink[@service="DOCUMENT"]   -->
		<ref:lnlink>
			<xsl:apply-templates select="@* | node()"/>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="lnlink/key-name[@name=&#34;DOC-ID&#34; OR @name=&#34;DOCID&#34;]">

		<!--  Original Target XPath:  ref:lnlink[@service="DOCUMENT"]   -->
		<ref:lnlink>
			<xsl:apply-templates select="@* | node()"/>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="lnlink[@service=&#34;DOC-ID&#34; or @service=&#34;DOCID&#34;]">

		<!--  Original Target XPath:  ref:lnlink[@service="DOCUMENT"]   -->
		<ref:lnlink>
			<xsl:apply-templates select="@* | node()"/>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="lnlink">

		<!--  Original Target XPath:  ref:lnlink   -->
		<ref:lnlink>
			<xsl:apply-templates select="@* | node()"/>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="lnlink/marker">

		<!--  Original Target XPath:  ref:lnlink/ref:marker   -->
		<ref:lnlink>
			<ref:marker>
				<xsl:apply-templates select="@* | node()"/>
			</ref:marker>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="lnlink/marker/@role">

		<!--  Original Target XPath:  ref:lnlink/ref:marker/@role   -->
		<ref:lnlink>
			<ref:marker>
				<xsl:attribute name="role">
					<xsl:apply-templates select="node()"/>
				</xsl:attribute>
			</ref:marker>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="lnlink/marker/@status">

		<!--  Original Target XPath:  ref:lnlink/ref:locator   -->
		<ref:lnlink>
			<ref:locator>
				<xsl:apply-templates select="@* | node()"/>
			</ref:locator>
		</ref:lnlink>

	</xsl:template>

	<xsl:template match="lnlink/@refpt">

		<!--  Original Target XPath:  ref:lnlink/ref:locator/@anchoridref   -->
		<ref:lnlink>
			<ref:locator>
				<xsl:attribute name="anchoridref">
					<xsl:apply-templates select="node()"/>
				</xsl:attribute>
			</ref:locator>
		</ref:lnlink>

	</xsl:template>

</xsl:stylesheet>