<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:dita="http://dita.oasis-open.org/architecture/2005/" xmlns:dig="http://www.lexis-nexis.com/glp/dig" xmlns:casedigest="http://www.lexisnexis.com/xmlschemas/content/legal/case-digest/1/" xmlns:seclaw="http://www.lexisnexis.com/xmlschemas/content/legal/secondary-law/1/" xmlns="http://www.lexisnexis.com/xmlschemas/content/shared/base/1/" version="2.0" exclude-result-prefixes="dita dig casedigest seclaw">

	<dita:topic xmlns="http://dita.oasis-open.org/architecture/2005/" id="dig.damage">
    <title>dig:damage <lnpid>id-CA14-35633</lnpid></title>
    <body>
        <section>
            <p><sourcexml>dig:damages</sourcexml> becomes
                    <targetxml>seclaw:body/seclaw:digestgrp/seclaw:digest/casedigest:damages</targetxml></p>
            <p><sourcexml>dig:damages-description/p/text</sourcexml> becomes
                    <targetxml>seclaw:body/seclaw:digestgrp/seclaw:digest/casedigest:damages/casedigest:awardamount/textitem</targetxml></p>
            <p><sourcexml>dig:damages-valuation</sourcexml> becomes
                    <targetxml>seclaw:body/seclaw:digestgrp/seclaw:digest/casedigest:damages/casedigest:valuation/bodytext</targetxml></p>
            <note><p>Conversion should not create consecutive <targetxml>seclaw:digest</targetxml>
                    elements. When 2 or more consecutive sibling source elements map to
                        <targetxml>seclaw:digest</targetxml>, data should be merged to a single
                        <targetxml>seclaw:digest</targetxml> element unless this would hamper
                    content ordering.</p></note>
        </section>
        <example>
            <title>Example 1: Mapping of
                    <sourcexml>dig:damages/dig:damages-description/p/text</sourcexml></title>
            <codeblock>
&lt;dig:damages&gt;
    &lt;dig:damages-description&gt;
        &lt;p&gt;
            &lt;text&gt;Non-pecuniary damages: $100,000.&lt;/text&gt;
        &lt;/p&gt;
    &lt;/dig:damages-description&gt;
&lt;/dig:damages&gt;
       </codeblock>
            <b>becomes</b>
            <codeblock>
&lt;seclaw:body&gt;
    &lt;seclaw:digestgrp&gt;
        &lt;seclaw:digest&gt;
            &lt;casedigest:damages&gt;
                &lt;casedigest:awardamount&gt;
                    &lt;textitem&gt;Non-pecuniary damages: $100,000.&lt;/textitem&gt;
                &lt;/casedigest:awardamount&gt;
            &lt;/casedigest:damages&gt;
        &lt;/seclaw:digest&gt;
    &lt;/seclaw:digestgrp&gt;
&lt;/seclaw:body&gt;
       </codeblock>
        </example>

        <example>
            <title>Example 2: Mapping of
                <sourcexml>dig:damages/dig:damages-valuation</sourcexml></title>
            <codeblock>
&lt;dig:damages&gt;
    &lt;dig:damages-valuation&gt;
        &lt;p&gt;
            &lt;text&gt;N/A&lt;/text&gt;
        &lt;/p&gt;
    &lt;/dig:damages-valuation&gt;
&lt;/dig:damages&gt;
       </codeblock>
            <b>becomes</b>
            <codeblock>
&lt;seclaw:body&gt;
    &lt;seclaw:digestgrp&gt;
        &lt;seclaw:digest&gt;
            &lt;casedigest:damages&gt;
                &lt;casedigest:valuation&gt;
                    &lt;bodytext&gt;
                        &lt;p&gt;
                            &lt;text&gt;Contributory negligence&lt;/text&gt;
                        &lt;/p&gt;
                    &lt;/bodytext&gt;
                &lt;/casedigest:valuation&gt;
            &lt;/casedigest:damages&gt;
        &lt;/seclaw:digest&gt;
    &lt;/seclaw:digestgrp&gt;
&lt;/seclaw:body&gt;
       </codeblock>
        </example>
        <section>
            <title>Changes</title>
            <p>2015-03-26: <ph id="change_20150326_jm">For target
                        <targetxml>casedigest:valuation</targetxml>, added child
                        <targetxml>bodytext</targetxml> to rule and example. The child is required.
                    RFA 12.</ph></p>
            <p>2015-02-20: <ph id="change_20150220_PS">Created.</ph></p>
        </section>
    </body>
	</dita:topic>

	<!--  @@@ This file has been autogenerated.  Remove this comment after manual development complete! @@@  -->
	<!--    Original DITA file location:  DITA\ConversionInstructions\Rosetta\DITA-CAN\CA14-Emerging_Issues\dig.damage.dita  -->
	

    <!-- Vikas Rohilla : Template to match the  dig:damages nad creates the casedigest:damages -->

    <xsl:template match="dig:damages">
        <casedigest:damages>
            <xsl:apply-templates select="@* | node()"/>
        </casedigest:damages>
    </xsl:template>

    <!-- Vikas Rohilla : Template to match the dig:damages-description/p/text and creates the casedigest:awardamount/textitem -->
    <xsl:template match="dig:damages-description/p/text">
        <casedigest:awardamount>
            <textitem>
                <xsl:apply-templates select="@* | node()"/>
            </textitem>
        </casedigest:awardamount>
    </xsl:template>

    <!-- Vikas Rohilla : Template to match the dig:damages-valuation and creates the casedigest:valuation/bodytext -->
    <xsl:template match="dig:damages-valuation">
        <casedigest:valuation>
            <bodytext>
                <xsl:apply-templates select="@* | node()"/>
            </bodytext>
        </casedigest:valuation>
    </xsl:template>

    <!-- Vikas Rohilla : Template to match the dig:damages-description or dig:damages-description/p and process the childs node -->
    <xsl:template match="dig:damages-description/p | dig:damages-description">
                <xsl:apply-templates select="@* | node()"/>
    </xsl:template>

</xsl:stylesheet>